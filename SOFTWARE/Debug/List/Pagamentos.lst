###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.50.3.4676/W32 for ARM      13/Sep/2017  18:09:15 #
# Copyright 1999-2013 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\repositorios\MaisPipocaG2\SOFTWARE\Drivers\Pagamentos #
#                    \Pagamentos.c                                            #
#    Command line =  C:\repositorios\MaisPipocaG2\SOFTWARE\Drivers\Pagamentos #
#                    \Pagamentos.c -lC C:\repositorios\MaisPipocaG2\SOFTWARE\ #
#                    Debug\List\ -lA C:\repositorios\MaisPipocaG2\SOFTWARE\De #
#                    bug\List\ -o C:\repositorios\MaisPipocaG2\SOFTWARE\Debug #
#                    \Obj\ --no_cse --no_unroll --no_inline --no_code_motion  #
#                    --no_tbaa --no_clustering --no_scheduling --debug        #
#                    --endian=little --cpu=Cortex-M3 -e --fpu=None            #
#                    --dlib_config "C:\Program Files (x86)\IAR                #
#                    Systems\Embedded Workbench 6.5\arm\INC\c\DLib_Config_Nor #
#                    mal.h" -On                                               #
#    List file    =  C:\repositorios\MaisPipocaG2\SOFTWARE\Debug\List\Pagamen #
#                    tos.lst                                                  #
#    Object file  =  C:\repositorios\MaisPipocaG2\SOFTWARE\Debug\Obj\Pagament #
#                    os.o                                                     #
#                                                                             #
#                                                                             #
###############################################################################

C:\repositorios\MaisPipocaG2\SOFTWARE\Drivers\Pagamentos\Pagamentos.c
      1          /*__________________________________________________________________________________
      2          |	Quark Tecnologia Eletrônica Embarcada
      3          |       
      4          |       Itapema - SC
      5          |       www.quarktee.com.br
      6          | __________________________________________________________________________________
      7          |
      8          |       This source code was developed by Quark  and cannot be copied, in part 
      9          |       or in whole, or used, except when legally licensed by Quark 
     10          |       or its distributors.
     11          |
     12          |       Este código é propriedade da Quark  e não pode ser copiado, em parte 
     13          |       ou em todo, ou utilizado, exceto quando for legalmente licenciado pela 
     14          |       Quark  ou por um de seus distribuidores.
     15          | __________________________________________________________________________________
     16          |
     17          |       Arquivo            :  Pagamentos.c
     18          |       Descrição          :  Biblioteca para controle dos meios de pagamento
     19          | 
     20          |       Autor              :  Marcos Aquino
     21          |       Data criação       :  22/02/2017
     22          |
     23          |       Revisões           :  1.0.0.0
     24          |
     25          |
     26          | __________________________________________________________________________________
     27          */
     28          
     29          /***********************************************************************************
     30          *       Includes
     31          ***********************************************************************************/
     32          #include <nxp\iolpc1768.h>

   \                                 In section .noinit, at 0xe000e100
   \   __absolute union <unnamed> volatile _A_SETENA0
   \                     _A_SETENA0:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0xe000e280
   \   __absolute union <unnamed> volatile _A_CLRPEND0
   \                     _A_CLRPEND0:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x400fc140
   \   __absolute union <unnamed> volatile _A_EXTINT
   \                     _A_EXTINT:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x400fc148
   \   __absolute union <unnamed> volatile _A_EXTMODE
   \                     _A_EXTMODE:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x400fc14c
   \   __absolute union <unnamed> volatile _A_EXTPOLAR
   \                     _A_EXTPOLAR:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x4002c010
   \   __absolute union <unnamed> volatile _A_PINSEL4
   \                     _A_PINSEL4:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x2009c020
   \   __absolute union <unnamed> volatile _A_FIO1DIR
   \                     _A_FIO1DIR:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x2009c038
   \   __absolute union <unnamed> volatile _A_FIO1SET
   \                     _A_FIO1SET:
   \   00000000                      DS8 4

   \                                 In section .noinit, at 0x2009c03c
   \   __absolute union <unnamed> volatile _A_FIO1CLR
   \                     _A_FIO1CLR:
   \   00000000                      DS8 4
     33          #include <stdio.h>
     34          #include <stdlib.h>
     35          #include <string.h>
     36          #include "..\..\includes.h"
     37          #include "pagamentos.h"
     38          #include "supervisao_mdb.h"
     39          /***********************************************************************************
     40          *       Definição
     41          ***********************************************************************************/
     42          #define INHIBIT_UCA1_PIN                        (0x01)<<24
     43          #define INI_INHIBIT_UCA1()                      FIO1DIR|=INHIBIT_UCA1_PIN
     44          #define SET_INHIBIT_UCA1(X)                     X?(FIO1SET|=INHIBIT_UCA1_PIN):(FIO1CLR|=INHIBIT_UCA1_PIN)
     45          
     46          #define INHIBIT_P70_PIN                         (0x01)<<25
     47          #define INI_INHIBIT_P70()                       FIO1DIR|=INHIBIT_P70_PIN
     48          #define SET_INHIBIT_P70(X)                      X?(FIO1SET|=INHIBIT_P70_PIN):(FIO1CLR|=INHIBIT_P70_PIN)
     49          
     50          #define RELOAD_FILTRO_UCA                       50
     51          #define RELOAD_TIMEOUT_PAGAMENTO                60*1000
     52          /***********************************************************************************
     53          *       Variaveis - locais
     54          ***********************************************************************************/

   \                                 In section .bss, align 2
     55          unsigned short int PAGAMENTOS_valor_acumulado_uca=0;
   \                     PAGAMENTOS_valor_acumulado_uca:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
     56          unsigned short int PAGAMENTOS_filtro_uca=0;
   \                     PAGAMENTOS_filtro_uca:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
     57          unsigned short int PAGAMENTOS_valor_acumulado_p70=0;
   \                     PAGAMENTOS_valor_acumulado_p70:
   \   00000000                      DS8 2

   \                                 In section .bss, align 2
     58          unsigned short int PAGAMENTOS_filtro_p70=0;
   \                     PAGAMENTOS_filtro_p70:
   \   00000000                      DS8 2

   \                                 In section .bss, align 4
     59          unsigned int PAGAMENTOS_timeout_pagamento=0; 
   \                     PAGAMENTOS_timeout_pagamento:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     60          unsigned int PAGAMENTOS_incremento_uca;
   \                     PAGAMENTOS_incremento_uca:
   \   00000000                      DS8 4

   \                                 In section .bss, align 4
     61          unsigned int PAGAMENTOS_incremento_p70;
   \                     PAGAMENTOS_incremento_p70:
   \   00000000                      DS8 4
     62          

   \                                 In section .bss, align 4
     63          int PAGAMENTOS_valor_acumulado_geral=0;
   \                     PAGAMENTOS_valor_acumulado_geral:
   \   00000000                      DS8 4
     64          

   \                                 In section .bss, align 4
     65          xSemaphoreHandle PAGAMENTOS_semaforo_pagamentos;
   \                     PAGAMENTOS_semaforo_pagamentos:
   \   00000000                      DS8 4

   \                                 In section .data, align 4
     66          unsigned PAGAMENTOS_bloqueio_p70=255;
   \                     PAGAMENTOS_bloqueio_p70:
   \   00000000   0x000000FF         DC32 255
     67          
     68          /***********************************************************************************
     69          *       Funções - locais
     70          ***********************************************************************************/
     71          void PAGAMENTOS_irq_uca_1(void);
     72          void PAGAMENTOS_irq_p70(void);
     73          
     74          /***********************************************************************************
     75          *       Implementação das funções
     76          ***********************************************************************************/
     77          
     78          /***********************************************************************************
     79          *       Descrição       :       Inicializa o módulo
     80          *       Parametros      :       nenhum
     81          *       Retorno         :       nenhum
     82          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     83          void PAGAMENTOS_ini(void){
   \                     PAGAMENTOS_ini:
   \   00000000   0xB580             PUSH     {R7,LR}
     84            
     85            INI_INHIBIT_UCA1();
   \   00000002   0x.... 0x....      LDR.W    R0,??DataTable15  ;; 0x2009c020
   \   00000006   0x6800             LDR      R0,[R0, #+0]
   \   00000008   0xF050 0x7080      ORRS     R0,R0,#0x1000000
   \   0000000C   0x.... 0x....      LDR.W    R1,??DataTable15  ;; 0x2009c020
   \   00000010   0x6008             STR      R0,[R1, #+0]
     86            INI_INHIBIT_P70();
   \   00000012   0x.... 0x....      LDR.W    R0,??DataTable15  ;; 0x2009c020
   \   00000016   0x6800             LDR      R0,[R0, #+0]
   \   00000018   0xF050 0x7000      ORRS     R0,R0,#0x2000000
   \   0000001C   0x.... 0x....      LDR.W    R1,??DataTable15  ;; 0x2009c020
   \   00000020   0x6008             STR      R0,[R1, #+0]
     87            
     88            PINSEL4_bit.P2_12 = 1;
   \   00000022   0x2001             MOVS     R0,#+1
   \   00000024   0x.... 0x....      LDR.W    R1,??DataTable15_1  ;; 0x4002c010
   \   00000028   0x6809             LDR      R1,[R1, #+0]
   \   0000002A   0xF360 0x6119      BFI      R1,R0,#+24,#+2
   \   0000002E   0x.... 0x....      LDR.W    R0,??DataTable15_1  ;; 0x4002c010
   \   00000032   0x6001             STR      R1,[R0, #+0]
     89            EXTMODE_bit.EXTMODE2 = 1;
   \   00000034   0x.... 0x....      LDR.W    R0,??DataTable15_2  ;; 0x400fc148
   \   00000038   0x6800             LDR      R0,[R0, #+0]
   \   0000003A   0xF050 0x0004      ORRS     R0,R0,#0x4
   \   0000003E   0x.... 0x....      LDR.W    R1,??DataTable15_2  ;; 0x400fc148
   \   00000042   0x6008             STR      R0,[R1, #+0]
     90            EXTPOLAR_bit.EXTPOLAR2 = 1;    
   \   00000044   0x.... 0x....      LDR.W    R0,??DataTable15_3  ;; 0x400fc14c
   \   00000048   0x6800             LDR      R0,[R0, #+0]
   \   0000004A   0xF050 0x0004      ORRS     R0,R0,#0x4
   \   0000004E   0x.... 0x....      LDR.W    R1,??DataTable15_3  ;; 0x400fc14c
   \   00000052   0x6008             STR      R0,[R1, #+0]
     91            SETENA0_bit.SETENA20 = 1;   
   \   00000054   0x.... 0x....      LDR.W    R0,??DataTable15_4  ;; 0xe000e100
   \   00000058   0x6800             LDR      R0,[R0, #+0]
   \   0000005A   0xF450 0x1080      ORRS     R0,R0,#0x100000
   \   0000005E   0x.... 0x....      LDR.W    R1,??DataTable15_4  ;; 0xe000e100
   \   00000062   0x6008             STR      R0,[R1, #+0]
     92            
     93            PINSEL4_bit.P2_13 = 1;
   \   00000064   0x2001             MOVS     R0,#+1
   \   00000066   0x.... 0x....      LDR.W    R1,??DataTable15_1  ;; 0x4002c010
   \   0000006A   0x6809             LDR      R1,[R1, #+0]
   \   0000006C   0xF360 0x619B      BFI      R1,R0,#+26,#+2
   \   00000070   0x.... 0x....      LDR.W    R0,??DataTable15_1  ;; 0x4002c010
   \   00000074   0x6001             STR      R1,[R0, #+0]
     94            EXTMODE_bit.EXTMODE3 = 1;
   \   00000076   0x.... 0x....      LDR.W    R0,??DataTable15_2  ;; 0x400fc148
   \   0000007A   0x6800             LDR      R0,[R0, #+0]
   \   0000007C   0xF050 0x0008      ORRS     R0,R0,#0x8
   \   00000080   0x.... 0x....      LDR.W    R1,??DataTable15_2  ;; 0x400fc148
   \   00000084   0x6008             STR      R0,[R1, #+0]
     95            EXTPOLAR_bit.EXTPOLAR3 = 1;    
   \   00000086   0x.... 0x....      LDR.W    R0,??DataTable15_3  ;; 0x400fc14c
   \   0000008A   0x6800             LDR      R0,[R0, #+0]
   \   0000008C   0xF050 0x0008      ORRS     R0,R0,#0x8
   \   00000090   0x.... 0x....      LDR.W    R1,??DataTable15_3  ;; 0x400fc14c
   \   00000094   0x6008             STR      R0,[R1, #+0]
     96            SETENA0_bit.SETENA21 = 1;    
   \   00000096   0x.... 0x....      LDR.W    R0,??DataTable15_4  ;; 0xe000e100
   \   0000009A   0x6800             LDR      R0,[R0, #+0]
   \   0000009C   0xF450 0x1000      ORRS     R0,R0,#0x200000
   \   000000A0   0x.... 0x....      LDR.W    R1,??DataTable15_4  ;; 0xe000e100
   \   000000A4   0x6008             STR      R0,[R1, #+0]
     97            
     98            SET_INHIBIT_UCA1(1);
   \   000000A6   0x.... 0x....      LDR.W    R0,??DataTable15_5  ;; 0x2009c038
   \   000000AA   0x6800             LDR      R0,[R0, #+0]
   \   000000AC   0xF050 0x7080      ORRS     R0,R0,#0x1000000
   \   000000B0   0x.... 0x....      LDR.W    R1,??DataTable15_5  ;; 0x2009c038
   \   000000B4   0x6008             STR      R0,[R1, #+0]
     99            SET_INHIBIT_P70(1);
   \   000000B6   0x.... 0x....      LDR.W    R0,??DataTable15_5  ;; 0x2009c038
   \   000000BA   0x6800             LDR      R0,[R0, #+0]
   \   000000BC   0xF050 0x7000      ORRS     R0,R0,#0x2000000
   \   000000C0   0x.... 0x....      LDR.W    R1,??DataTable15_5  ;; 0x2009c038
   \   000000C4   0x6008             STR      R0,[R1, #+0]
    100            vSemaphoreCreateBinary(PAGAMENTOS_semaforo_pagamentos);
   \   000000C6   0x2100             MOVS     R1,#+0
   \   000000C8   0x2001             MOVS     R0,#+1
   \   000000CA   0x.... 0x....      BL       xQueueCreate
   \   000000CE   0x.... 0x....      LDR.W    R1,??DataTable15_6
   \   000000D2   0x6008             STR      R0,[R1, #+0]
   \   000000D4   0x.... 0x....      LDR.W    R0,??DataTable15_6
   \   000000D8   0x6800             LDR      R0,[R0, #+0]
   \   000000DA   0x2800             CMP      R0,#+0
   \   000000DC   0xD007             BEQ.N    ??PAGAMENTOS_ini_0
   \   000000DE   0x2300             MOVS     R3,#+0
   \   000000E0   0x2200             MOVS     R2,#+0
   \   000000E2   0x2100             MOVS     R1,#+0
   \   000000E4   0x.... 0x....      LDR.W    R0,??DataTable15_6
   \   000000E8   0x6800             LDR      R0,[R0, #+0]
   \   000000EA   0x.... 0x....      BL       xQueueGenericSend
    101            
    102            PARAMETROS_le(ADR_VALOR_PULSO_MOEDEIRO,(void*)&PAGAMENTOS_incremento_uca);
   \                     ??PAGAMENTOS_ini_0:
   \   000000EE   0x.... 0x....      LDR.W    R1,??DataTable15_7
   \   000000F2   0x2008             MOVS     R0,#+8
   \   000000F4   0x.... 0x....      BL       PARAMETROS_le
    103            PARAMETROS_le(ADR_VALOR_PULSO_NOTEIRO,(void*)&PAGAMENTOS_incremento_p70);
   \   000000F8   0x.... 0x....      LDR.W    R1,??DataTable15_8
   \   000000FC   0x2009             MOVS     R0,#+9
   \   000000FE   0x.... 0x....      BL       PARAMETROS_le
    104          
    105            if(PAGAMENTOS_incremento_uca>1000)
   \   00000102   0x.... 0x....      LDR.W    R0,??DataTable15_7
   \   00000106   0x6800             LDR      R0,[R0, #+0]
   \   00000108   0xF5B0 0x7F7A      CMP      R0,#+1000
   \   0000010C   0xD904             BLS.N    ??PAGAMENTOS_ini_1
    106              PAGAMENTOS_incremento_uca=1000;
   \   0000010E   0x.... 0x....      LDR.W    R0,??DataTable15_7
   \   00000112   0xF44F 0x717A      MOV      R1,#+1000
   \   00000116   0x6001             STR      R1,[R0, #+0]
    107            
    108            if(PAGAMENTOS_incremento_p70>100000)
   \                     ??PAGAMENTOS_ini_1:
   \   00000118   0x....             LDR.N    R0,??DataTable15_8
   \   0000011A   0x6800             LDR      R0,[R0, #+0]
   \   0000011C   0x....             LDR.N    R1,??DataTable15_9  ;; 0x186a1
   \   0000011E   0x4288             CMP      R0,R1
   \   00000120   0xD302             BCC.N    ??PAGAMENTOS_ini_2
    109            PAGAMENTOS_incremento_p70=100000;
   \   00000122   0x....             LDR.N    R0,??DataTable15_8
   \   00000124   0x....             LDR.N    R1,??DataTable15_10  ;; 0x186a0
   \   00000126   0x6001             STR      R1,[R0, #+0]
    110             
    111          }
   \                     ??PAGAMENTOS_ini_2:
   \   00000128   0xBD01             POP      {R0,PC}          ;; return
   \   0000012A                      REQUIRE _A_FIO1DIR
   \   0000012A                      REQUIRE _A_PINSEL4
   \   0000012A                      REQUIRE _A_EXTMODE
   \   0000012A                      REQUIRE _A_EXTPOLAR
   \   0000012A                      REQUIRE _A_SETENA0
   \   0000012A                      REQUIRE _A_FIO1SET
    112          /***********************************************************************************
    113          *       Descrição       :       Tick de timer para o módulo pagamentos
    114          *       Parametros      :       nenhum
    115          *       Retorno         :       nenhum
    116          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    117          void PAGAMENTOS_timer_tick(void){
    118            
    119            if(PAGAMENTOS_filtro_uca)
   \                     PAGAMENTOS_timer_tick:
   \   00000000   0x....             LDR.N    R0,??DataTable15_11
   \   00000002   0x8800             LDRH     R0,[R0, #+0]
   \   00000004   0x2800             CMP      R0,#+0
   \   00000006   0xD004             BEQ.N    ??PAGAMENTOS_timer_tick_0
    120              PAGAMENTOS_filtro_uca--;
   \   00000008   0x....             LDR.N    R0,??DataTable15_11
   \   0000000A   0x8800             LDRH     R0,[R0, #+0]
   \   0000000C   0x1E40             SUBS     R0,R0,#+1
   \   0000000E   0x....             LDR.N    R1,??DataTable15_11
   \   00000010   0x8008             STRH     R0,[R1, #+0]
    121            
    122            if(PAGAMENTOS_filtro_p70)
   \                     ??PAGAMENTOS_timer_tick_0:
   \   00000012   0x....             LDR.N    R0,??DataTable15_12
   \   00000014   0x8800             LDRH     R0,[R0, #+0]
   \   00000016   0x2800             CMP      R0,#+0
   \   00000018   0xD004             BEQ.N    ??PAGAMENTOS_timer_tick_1
    123              PAGAMENTOS_filtro_p70--;
   \   0000001A   0x....             LDR.N    R0,??DataTable15_12
   \   0000001C   0x8800             LDRH     R0,[R0, #+0]
   \   0000001E   0x1E40             SUBS     R0,R0,#+1
   \   00000020   0x....             LDR.N    R1,??DataTable15_12
   \   00000022   0x8008             STRH     R0,[R1, #+0]
    124          }
   \                     ??PAGAMENTOS_timer_tick_1:
   \   00000024   0x4770             BX       LR               ;; return
    125          /***********************************************************************************
    126          *       Descrição       :       Função principal do módulo
    127          *       Parametros      :       nenhum
    128          *       Retorno         :       nenhum
    129          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    130          void PAGAMENTOS_main(void*pPar){
   \                     PAGAMENTOS_main:
   \   00000000   0xB538             PUSH     {R3-R5,LR}
   \   00000002   0x0004             MOVS     R4,R0
    131            unsigned int acumulado;
    132            
    133            SMDB_ini();  
   \   00000004   0x.... 0x....      BL       SMDB_ini
    134            vTaskDelay(3000);
   \   00000008   0xF640 0x30B8      MOVW     R0,#+3000
   \   0000000C   0x.... 0x....      BL       vTaskDelay
    135            
    136            for(;;){    
    137              
    138              SMDB_tick();    
   \                     ??PAGAMENTOS_main_0:
   \   00000010   0x.... 0x....      BL       SMDB_tick
    139              acumulado = BV20_get_valor_acumulador();
   \   00000014   0x.... 0x....      BL       BV20_get_valor_acumulador
   \   00000018   0x0005             MOVS     R5,R0
    140              if(acumulado){
   \   0000001A   0x2D00             CMP      R5,#+0
   \   0000001C   0xD009             BEQ.N    ??PAGAMENTOS_main_1
    141                PAGAMENTOS_adiciona_valores(acumulado*100);
   \   0000001E   0x2064             MOVS     R0,#+100
   \   00000020   0xFB00 0xF005      MUL      R0,R0,R5
   \   00000024   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000026   0x.... 0x....      BL       PAGAMENTOS_adiciona_valores
    142                BV20_subtrai_valor_acumulado(acumulado);
   \   0000002A   0x0028             MOVS     R0,R5
   \   0000002C   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   0000002E   0x.... 0x....      BL       BV20_subtrai_valor_acumulado
    143              }
    144                  
    145              vTaskDelay(10);
   \                     ??PAGAMENTOS_main_1:
   \   00000032   0x200A             MOVS     R0,#+10
   \   00000034   0x.... 0x....      BL       vTaskDelay
   \   00000038   0xE7EA             B.N      ??PAGAMENTOS_main_0
    146            }  
    147          }
    148          /***********************************************************************************
    149          *       Descrição       :       Irq para o moedeiro UCA1
    150          *       Parametros      :       nenhum
    151          *       Retorno         :       nenhum
    152          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    153          void PAGAMENTOS_irq_uca_1(void){
    154            
    155            // Timer para gerar um
    156            // filtro de limita a frequência máxima
    157            // dos pulsos
    158            if(!PAGAMENTOS_filtro_uca){
   \                     PAGAMENTOS_irq_uca_1:
   \   00000000   0x....             LDR.N    R0,??DataTable15_11
   \   00000002   0x8800             LDRH     R0,[R0, #+0]
   \   00000004   0x2800             CMP      R0,#+0
   \   00000006   0xD109             BNE.N    ??PAGAMENTOS_irq_uca_1_0
    159              
    160              PAGAMENTOS_valor_acumulado_uca+=PAGAMENTOS_incremento_uca;  
   \   00000008   0x....             LDR.N    R0,??DataTable15_13
   \   0000000A   0x8800             LDRH     R0,[R0, #+0]
   \   0000000C   0x....             LDR.N    R1,??DataTable15_7
   \   0000000E   0x6809             LDR      R1,[R1, #+0]
   \   00000010   0x1808             ADDS     R0,R1,R0
   \   00000012   0x....             LDR.N    R1,??DataTable15_13
   \   00000014   0x8008             STRH     R0,[R1, #+0]
    161              PAGAMENTOS_filtro_uca = RELOAD_FILTRO_UCA;
   \   00000016   0x....             LDR.N    R0,??DataTable15_11
   \   00000018   0x2132             MOVS     R1,#+50
   \   0000001A   0x8001             STRH     R1,[R0, #+0]
    162            }
    163            
    164            EXTINT_bit.EINT2 = 1;
   \                     ??PAGAMENTOS_irq_uca_1_0:
   \   0000001C   0x....             LDR.N    R0,??DataTable15_14  ;; 0x400fc140
   \   0000001E   0x6800             LDR      R0,[R0, #+0]
   \   00000020   0xF050 0x0004      ORRS     R0,R0,#0x4
   \   00000024   0x....             LDR.N    R1,??DataTable15_14  ;; 0x400fc140
   \   00000026   0x6008             STR      R0,[R1, #+0]
    165            CLRPEND0_bit.CLRPEND20 = 1;  
   \   00000028   0x....             LDR.N    R0,??DataTable15_15  ;; 0xe000e280
   \   0000002A   0x6800             LDR      R0,[R0, #+0]
   \   0000002C   0xF450 0x1080      ORRS     R0,R0,#0x100000
   \   00000030   0x....             LDR.N    R1,??DataTable15_15  ;; 0xe000e280
   \   00000032   0x6008             STR      R0,[R1, #+0]
    166          }
   \   00000034   0x4770             BX       LR               ;; return
   \   00000036                      REQUIRE _A_EXTINT
   \   00000036                      REQUIRE _A_CLRPEND0
    167          /***********************************************************************************
    168          *       Descrição       :       Valor acumulado no totalizado do UCA1
    169          *       Parametros      :       nenhum
    170          *       Retorno         :       nenhum
    171          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    172          unsigned short int PAGAMENTOS_get_contagem_uca1(void){
    173            
    174            return PAGAMENTOS_valor_acumulado_uca;
   \                     PAGAMENTOS_get_contagem_uca1:
   \   00000000   0x....             LDR.N    R0,??DataTable15_13
   \   00000002   0x8800             LDRH     R0,[R0, #+0]
   \   00000004   0x4770             BX       LR               ;; return
    175          }
    176          /***********************************************************************************
    177          *       Descrição       :       Subtraí um valor do acumulado no UCA1
    178          *       Parametros      :       (unsigned short int) valor que será
    179          *                                                    subtraido
    180          *       Retorno         :       nenhum
    181          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    182          void PAGAMENTOS_subtrai_contagem_uca1(unsigned short int contagem){
    183            
    184            if(contagem>=PAGAMENTOS_valor_acumulado_uca)
   \                     PAGAMENTOS_subtrai_contagem_uca1:
   \   00000000   0x....             LDR.N    R1,??DataTable15_13
   \   00000002   0x8809             LDRH     R1,[R1, #+0]
   \   00000004   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000006   0x4288             CMP      R0,R1
   \   00000008   0xD305             BCC.N    ??PAGAMENTOS_subtrai_contagem_uca1_0
    185              PAGAMENTOS_valor_acumulado_uca-=contagem;
   \   0000000A   0x....             LDR.N    R1,??DataTable15_13
   \   0000000C   0x8809             LDRH     R1,[R1, #+0]
   \   0000000E   0x1A09             SUBS     R1,R1,R0
   \   00000010   0x....             LDR.N    R2,??DataTable15_13
   \   00000012   0x8011             STRH     R1,[R2, #+0]
   \   00000014   0xE002             B.N      ??PAGAMENTOS_subtrai_contagem_uca1_1
    186            else
    187              PAGAMENTOS_valor_acumulado_uca = 0;
   \                     ??PAGAMENTOS_subtrai_contagem_uca1_0:
   \   00000016   0x....             LDR.N    R1,??DataTable15_13
   \   00000018   0x2200             MOVS     R2,#+0
   \   0000001A   0x800A             STRH     R2,[R1, #+0]
    188          }
   \                     ??PAGAMENTOS_subtrai_contagem_uca1_1:
   \   0000001C   0x4770             BX       LR               ;; return
    189          /***********************************************************************************
    190          *       Descrição       :       Liga o bloqueio do UCA1
    191          *       Parametros      :       (unsigned char) flag 
    192          *       Retorno         :       nenhum
    193          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    194          void PAGAMENTOS_bloqueia_uca1(unsigned char flag){
    195            
    196            SET_INHIBIT_UCA1(flag);
   \                     PAGAMENTOS_bloqueia_uca1:
   \   00000000   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000002   0x2800             CMP      R0,#+0
   \   00000004   0xD006             BEQ.N    ??PAGAMENTOS_bloqueia_uca1_0
   \   00000006   0x....             LDR.N    R1,??DataTable15_5  ;; 0x2009c038
   \   00000008   0x6809             LDR      R1,[R1, #+0]
   \   0000000A   0xF051 0x7180      ORRS     R1,R1,#0x1000000
   \   0000000E   0x....             LDR.N    R2,??DataTable15_5  ;; 0x2009c038
   \   00000010   0x6011             STR      R1,[R2, #+0]
   \   00000012   0xE005             B.N      ??PAGAMENTOS_bloqueia_uca1_1
   \                     ??PAGAMENTOS_bloqueia_uca1_0:
   \   00000014   0x....             LDR.N    R1,??DataTable15_16  ;; 0x2009c03c
   \   00000016   0x6809             LDR      R1,[R1, #+0]
   \   00000018   0xF051 0x7180      ORRS     R1,R1,#0x1000000
   \   0000001C   0x....             LDR.N    R2,??DataTable15_16  ;; 0x2009c03c
   \   0000001E   0x6011             STR      R1,[R2, #+0]
    197          }
   \                     ??PAGAMENTOS_bloqueia_uca1_1:
   \   00000020   0x4770             BX       LR               ;; return
   \   00000022                      REQUIRE _A_FIO1SET
   \   00000022                      REQUIRE _A_FIO1CLR
    198          /***********************************************************************************
    199          *       Descrição       :       IRQ do noteiro P70
    200          *       Parametros      :       nenhum
    201          *       Retorno         :       nenhum
    202          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    203          void PAGAMENTOS_irq_p70(void){
    204            
    205            if(!PAGAMENTOS_bloqueio_p70 && !PAGAMENTOS_filtro_p70){
   \                     PAGAMENTOS_irq_p70:
   \   00000000   0x....             LDR.N    R0,??DataTable15_17
   \   00000002   0x6800             LDR      R0,[R0, #+0]
   \   00000004   0x2800             CMP      R0,#+0
   \   00000006   0xD10D             BNE.N    ??PAGAMENTOS_irq_p70_0
   \   00000008   0x....             LDR.N    R0,??DataTable15_12
   \   0000000A   0x8800             LDRH     R0,[R0, #+0]
   \   0000000C   0x2800             CMP      R0,#+0
   \   0000000E   0xD109             BNE.N    ??PAGAMENTOS_irq_p70_0
    206              PAGAMENTOS_valor_acumulado_p70+=PAGAMENTOS_incremento_p70;
   \   00000010   0x....             LDR.N    R0,??DataTable15_18
   \   00000012   0x8800             LDRH     R0,[R0, #+0]
   \   00000014   0x....             LDR.N    R1,??DataTable15_8
   \   00000016   0x6809             LDR      R1,[R1, #+0]
   \   00000018   0x1808             ADDS     R0,R1,R0
   \   0000001A   0x....             LDR.N    R1,??DataTable15_18
   \   0000001C   0x8008             STRH     R0,[R1, #+0]
    207              PAGAMENTOS_filtro_p70 = RELOAD_FILTRO_UCA;
   \   0000001E   0x....             LDR.N    R0,??DataTable15_12
   \   00000020   0x2132             MOVS     R1,#+50
   \   00000022   0x8001             STRH     R1,[R0, #+0]
    208            }  
    209            
    210            EXTINT_bit.EINT3 = 1;
   \                     ??PAGAMENTOS_irq_p70_0:
   \   00000024   0x....             LDR.N    R0,??DataTable15_14  ;; 0x400fc140
   \   00000026   0x6800             LDR      R0,[R0, #+0]
   \   00000028   0xF050 0x0008      ORRS     R0,R0,#0x8
   \   0000002C   0x....             LDR.N    R1,??DataTable15_14  ;; 0x400fc140
   \   0000002E   0x6008             STR      R0,[R1, #+0]
    211            CLRPEND0_bit.CLRPEND21 = 1;  
   \   00000030   0x....             LDR.N    R0,??DataTable15_15  ;; 0xe000e280
   \   00000032   0x6800             LDR      R0,[R0, #+0]
   \   00000034   0xF450 0x1000      ORRS     R0,R0,#0x200000
   \   00000038   0x....             LDR.N    R1,??DataTable15_15  ;; 0xe000e280
   \   0000003A   0x6008             STR      R0,[R1, #+0]
    212          }
   \   0000003C   0x4770             BX       LR               ;; return
   \   0000003E                      REQUIRE _A_EXTINT
   \   0000003E                      REQUIRE _A_CLRPEND0
    213          /***********************************************************************************
    214          *       Descrição       :       Setter para o inhibit do noteiro P70
    215          *       Parametros      :       (unsigned char) inhibit
    216          *       Retorno         :       nenhum
    217          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    218          void PAGAMENTOS_set_inhibit_p70(unsigned char flag){
    219            
    220            SET_INHIBIT_P70(flag);
   \                     PAGAMENTOS_set_inhibit_p70:
   \   00000000   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000002   0x2800             CMP      R0,#+0
   \   00000004   0xD006             BEQ.N    ??PAGAMENTOS_set_inhibit_p70_0
   \   00000006   0x....             LDR.N    R1,??DataTable15_5  ;; 0x2009c038
   \   00000008   0x6809             LDR      R1,[R1, #+0]
   \   0000000A   0xF051 0x7100      ORRS     R1,R1,#0x2000000
   \   0000000E   0x....             LDR.N    R2,??DataTable15_5  ;; 0x2009c038
   \   00000010   0x6011             STR      R1,[R2, #+0]
   \   00000012   0xE005             B.N      ??PAGAMENTOS_set_inhibit_p70_1
   \                     ??PAGAMENTOS_set_inhibit_p70_0:
   \   00000014   0x....             LDR.N    R1,??DataTable15_16  ;; 0x2009c03c
   \   00000016   0x6809             LDR      R1,[R1, #+0]
   \   00000018   0xF051 0x7100      ORRS     R1,R1,#0x2000000
   \   0000001C   0x....             LDR.N    R2,??DataTable15_16  ;; 0x2009c03c
   \   0000001E   0x6011             STR      R1,[R2, #+0]
    221          }
   \                     ??PAGAMENTOS_set_inhibit_p70_1:
   \   00000020   0x4770             BX       LR               ;; return
   \   00000022                      REQUIRE _A_FIO1SET
   \   00000022                      REQUIRE _A_FIO1CLR
    222          /***********************************************************************************
    223          *       Descrição       :       Getter para a contagem do P70
    224          *       Parametros      :       nenhum
    225          *       Retorno         :       (unsigned short int) contagem do acumulador
    226          *                               de valores do P70
    227          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    228          unsigned short int PAGAMENTOS_get_contagem_p70(void){
    229            
    230            return PAGAMENTOS_valor_acumulado_p70;
   \                     PAGAMENTOS_get_contagem_p70:
   \   00000000   0x....             LDR.N    R0,??DataTable15_18
   \   00000002   0x8800             LDRH     R0,[R0, #+0]
   \   00000004   0x4770             BX       LR               ;; return
    231          }
    232          /***********************************************************************************
    233          *       Descrição       :       Subtrai um valor da contagem do P70
    234          *       Parametros      :       (unsigned short int) valor
    235          *       Retorno         :       nenhum
    236          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    237          void PAGAMENTOS_subtrai_contagem_p70(unsigned short int contagem){
    238            
    239            if(contagem>PAGAMENTOS_valor_acumulado_p70)
   \                     PAGAMENTOS_subtrai_contagem_p70:
   \   00000000   0x....             LDR.N    R1,??DataTable15_18
   \   00000002   0x8809             LDRH     R1,[R1, #+0]
   \   00000004   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000006   0x4281             CMP      R1,R0
   \   00000008   0xD205             BCS.N    ??PAGAMENTOS_subtrai_contagem_p70_0
    240              PAGAMENTOS_valor_acumulado_p70 -= contagem;
   \   0000000A   0x....             LDR.N    R1,??DataTable15_18
   \   0000000C   0x8809             LDRH     R1,[R1, #+0]
   \   0000000E   0x1A09             SUBS     R1,R1,R0
   \   00000010   0x....             LDR.N    R2,??DataTable15_18
   \   00000012   0x8011             STRH     R1,[R2, #+0]
   \   00000014   0xE002             B.N      ??PAGAMENTOS_subtrai_contagem_p70_1
    241            else
    242              PAGAMENTOS_valor_acumulado_p70 = 0;    
   \                     ??PAGAMENTOS_subtrai_contagem_p70_0:
   \   00000016   0x....             LDR.N    R1,??DataTable15_18
   \   00000018   0x2200             MOVS     R2,#+0
   \   0000001A   0x800A             STRH     R2,[R1, #+0]
    243          }
   \                     ??PAGAMENTOS_subtrai_contagem_p70_1:
   \   0000001C   0x4770             BX       LR               ;; return
    244          /***********************************************************************************
    245          *       Descrição       :       Adiciona valores ao acumulador de dinheiro
    246          *       Parametros      :       (unsigned short int) valor
    247          *       Retorno         :       nenhum
    248          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    249          void PAGAMENTOS_adiciona_valores(unsigned short int valor){
   \                     PAGAMENTOS_adiciona_valores:
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    250            
    251             while(!xSemaphoreTake(PAGAMENTOS_semaforo_pagamentos,portTICK_RATE_MS*1));     
   \                     ??PAGAMENTOS_adiciona_valores_0:
   \   00000004   0x2300             MOVS     R3,#+0
   \   00000006   0x2201             MOVS     R2,#+1
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x....             LDR.N    R0,??DataTable15_6
   \   0000000C   0x6800             LDR      R0,[R0, #+0]
   \   0000000E   0x.... 0x....      BL       xQueueGenericReceive
   \   00000012   0x2800             CMP      R0,#+0
   \   00000014   0xD0F6             BEQ.N    ??PAGAMENTOS_adiciona_valores_0
    252             
    253             PAGAMENTOS_valor_acumulado_geral+=valor;
   \   00000016   0x....             LDR.N    R0,??DataTable15_19
   \   00000018   0x6800             LDR      R0,[R0, #+0]
   \   0000001A   0xB2A4             UXTH     R4,R4            ;; ZeroExt  R4,R4,#+16,#+16
   \   0000001C   0x1820             ADDS     R0,R4,R0
   \   0000001E   0x....             LDR.N    R1,??DataTable15_19
   \   00000020   0x6008             STR      R0,[R1, #+0]
    254             PAGAMENTOS_timeout_pagamento = RELOAD_TIMEOUT_PAGAMENTO;
   \   00000022   0x....             LDR.N    R0,??DataTable15_20
   \   00000024   0xF64E 0x2160      MOVW     R1,#+60000
   \   00000028   0x6001             STR      R1,[R0, #+0]
    255             
    256             xSemaphoreGive(PAGAMENTOS_semaforo_pagamentos);   
   \   0000002A   0x2300             MOVS     R3,#+0
   \   0000002C   0x2200             MOVS     R2,#+0
   \   0000002E   0x2100             MOVS     R1,#+0
   \   00000030   0x....             LDR.N    R0,??DataTable15_6
   \   00000032   0x6800             LDR      R0,[R0, #+0]
   \   00000034   0x.... 0x....      BL       xQueueGenericSend
    257          }
   \   00000038   0xBD10             POP      {R4,PC}          ;; return
    258          /***********************************************************************************
    259          *       Descrição       :       Getter para o acumulador de dinheiro
    260          *       Parametros      :       (nenhum)
    261          *       Retorno         :       (int) valor acumulado em moeda
    262          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    263          int PAGAMENTOS_get_valor_acumulado(void){
   \                     PAGAMENTOS_get_valor_acumulado:
   \   00000000   0xB530             PUSH     {R4,R5,LR}
   \   00000002   0xB083             SUB      SP,SP,#+12
    264             int valor;
    265             
    266             while(!xSemaphoreTake(PAGAMENTOS_semaforo_pagamentos,portTICK_RATE_MS*1));     
   \                     ??PAGAMENTOS_get_valor_acumulado_0:
   \   00000004   0x2300             MOVS     R3,#+0
   \   00000006   0x2201             MOVS     R2,#+1
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x....             LDR.N    R0,??DataTable15_6
   \   0000000C   0x6800             LDR      R0,[R0, #+0]
   \   0000000E   0x.... 0x....      BL       xQueueGenericReceive
   \   00000012   0x2800             CMP      R0,#+0
   \   00000014   0xD0F6             BEQ.N    ??PAGAMENTOS_get_valor_acumulado_0
    267             
    268             //Hoock para ler o UCA1
    269             if(PAGAMENTOS_valor_acumulado_p70){
   \   00000016   0x....             LDR.N    R0,??DataTable15_18
   \   00000018   0x8800             LDRH     R0,[R0, #+0]
   \   0000001A   0x2800             CMP      R0,#+0
   \   0000001C   0xD024             BEQ.N    ??PAGAMENTOS_get_valor_acumulado_1
    270               
    271               unsigned int fat_cartao_par;     
    272               unsigned int fat_cartao_tot;
    273               unsigned int temp = PAGAMENTOS_valor_acumulado_p70;
   \   0000001E   0x....             LDR.N    R0,??DataTable15_18
   \   00000020   0x8805             LDRH     R5,[R0, #+0]
    274               
    275               PARAMETROS_le(ADR_CARTAO_PARCIAL,(void*)&fat_cartao_par);
   \   00000022   0xA901             ADD      R1,SP,#+4
   \   00000024   0x200E             MOVS     R0,#+14
   \   00000026   0x.... 0x....      BL       PARAMETROS_le
    276               PARAMETROS_le(ADR_CARTAO_TOTAL,(void*)&fat_cartao_tot);
   \   0000002A   0xA900             ADD      R1,SP,#+0
   \   0000002C   0x200F             MOVS     R0,#+15
   \   0000002E   0x.... 0x....      BL       PARAMETROS_le
    277               
    278               fat_cartao_par+=temp;
   \   00000032   0x9801             LDR      R0,[SP, #+4]
   \   00000034   0x1828             ADDS     R0,R5,R0
   \   00000036   0x9001             STR      R0,[SP, #+4]
    279               fat_cartao_tot+=temp;
   \   00000038   0x9800             LDR      R0,[SP, #+0]
   \   0000003A   0x1828             ADDS     R0,R5,R0
   \   0000003C   0x9000             STR      R0,[SP, #+0]
    280               
    281               PARAMETROS_grava(ADR_CARTAO_PARCIAL,(void*)&fat_cartao_par);
   \   0000003E   0xA901             ADD      R1,SP,#+4
   \   00000040   0x200E             MOVS     R0,#+14
   \   00000042   0x.... 0x....      BL       PARAMETROS_grava
    282               PARAMETROS_grava(ADR_CARTAO_TOTAL,(void*)&fat_cartao_tot);
   \   00000046   0xA900             ADD      R1,SP,#+0
   \   00000048   0x200F             MOVS     R0,#+15
   \   0000004A   0x.... 0x....      BL       PARAMETROS_grava
    283               
    284               valor+= PAGAMENTOS_valor_acumulado_p70;   
                      ^
Warning[Pe549]: variable "valor" is used before its value is set
   \   0000004E   0x....             LDR.N    R0,??DataTable15_18
   \   00000050   0x8800             LDRH     R0,[R0, #+0]
   \   00000052   0x1904             ADDS     R4,R0,R4
    285               PAGAMENTOS_valor_acumulado_geral+=temp;
   \   00000054   0x....             LDR.N    R0,??DataTable15_19
   \   00000056   0x6800             LDR      R0,[R0, #+0]
   \   00000058   0x1828             ADDS     R0,R5,R0
   \   0000005A   0x....             LDR.N    R1,??DataTable15_19
   \   0000005C   0x6008             STR      R0,[R1, #+0]
    286               PAGAMENTOS_valor_acumulado_p70 -= temp; // É concorrente!
   \   0000005E   0x....             LDR.N    R0,??DataTable15_18
   \   00000060   0x8800             LDRH     R0,[R0, #+0]
   \   00000062   0x1B40             SUBS     R0,R0,R5
   \   00000064   0x....             LDR.N    R1,??DataTable15_18
   \   00000066   0x8008             STRH     R0,[R1, #+0]
    287             }
    288             
    289             valor = PAGAMENTOS_valor_acumulado_geral;   
   \                     ??PAGAMENTOS_get_valor_acumulado_1:
   \   00000068   0x....             LDR.N    R0,??DataTable15_19
   \   0000006A   0x6800             LDR      R0,[R0, #+0]
   \   0000006C   0x0004             MOVS     R4,R0
    290             valor+= PAGAMENTOS_valor_acumulado_uca;   
   \   0000006E   0x....             LDR.N    R0,??DataTable15_13
   \   00000070   0x8800             LDRH     R0,[R0, #+0]
   \   00000072   0x1904             ADDS     R4,R0,R4
    291             PAGAMENTOS_valor_acumulado_uca = 0;   
   \   00000074   0x....             LDR.N    R0,??DataTable15_13
   \   00000076   0x2100             MOVS     R1,#+0
   \   00000078   0x8001             STRH     R1,[R0, #+0]
    292             
    293             xSemaphoreGive(PAGAMENTOS_semaforo_pagamentos);     
   \   0000007A   0x2300             MOVS     R3,#+0
   \   0000007C   0x2200             MOVS     R2,#+0
   \   0000007E   0x2100             MOVS     R1,#+0
   \   00000080   0x....             LDR.N    R0,??DataTable15_6
   \   00000082   0x6800             LDR      R0,[R0, #+0]
   \   00000084   0x.... 0x....      BL       xQueueGenericSend
    294             
    295             return valor;  
   \   00000088   0x0020             MOVS     R0,R4
   \   0000008A   0xBD3E             POP      {R1-R5,PC}       ;; return
    296          }
    297          /***********************************************************************************
    298          *       Descrição       :       Subtrai valores do acumulador de moeda
    299          *       Parametros      :       (usigned int) valor
    300          *       Retorno         :       nenhum
    301          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    302          void PAGAMENTOS_subtrai_valores(unsigned int valor){
   \                     PAGAMENTOS_subtrai_valores:
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    303            
    304             while(!xSemaphoreTake(PAGAMENTOS_semaforo_pagamentos,portTICK_RATE_MS*1));     
   \                     ??PAGAMENTOS_subtrai_valores_0:
   \   00000004   0x2300             MOVS     R3,#+0
   \   00000006   0x2201             MOVS     R2,#+1
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x....             LDR.N    R0,??DataTable15_6
   \   0000000C   0x6800             LDR      R0,[R0, #+0]
   \   0000000E   0x.... 0x....      BL       xQueueGenericReceive
   \   00000012   0x2800             CMP      R0,#+0
   \   00000014   0xD0F6             BEQ.N    ??PAGAMENTOS_subtrai_valores_0
    305             
    306             if(PAGAMENTOS_valor_acumulado_geral>=valor)
   \   00000016   0x....             LDR.N    R0,??DataTable15_19
   \   00000018   0x6800             LDR      R0,[R0, #+0]
   \   0000001A   0x42A0             CMP      R0,R4
   \   0000001C   0xD305             BCC.N    ??PAGAMENTOS_subtrai_valores_1
    307               PAGAMENTOS_valor_acumulado_geral-=valor;
   \   0000001E   0x....             LDR.N    R0,??DataTable15_19
   \   00000020   0x6800             LDR      R0,[R0, #+0]
   \   00000022   0x1B00             SUBS     R0,R0,R4
   \   00000024   0x....             LDR.N    R1,??DataTable15_19
   \   00000026   0x6008             STR      R0,[R1, #+0]
   \   00000028   0xE002             B.N      ??PAGAMENTOS_subtrai_valores_2
    308             else
    309               PAGAMENTOS_valor_acumulado_geral = 0;
   \                     ??PAGAMENTOS_subtrai_valores_1:
   \   0000002A   0x....             LDR.N    R0,??DataTable15_19
   \   0000002C   0x2100             MOVS     R1,#+0
   \   0000002E   0x6001             STR      R1,[R0, #+0]
    310             
    311             if(PAGAMENTOS_valor_acumulado_geral<0)
   \                     ??PAGAMENTOS_subtrai_valores_2:
   \   00000030   0x....             LDR.N    R0,??DataTable15_19
   \   00000032   0x6800             LDR      R0,[R0, #+0]
   \   00000034   0x2800             CMP      R0,#+0
   \   00000036   0xD502             BPL.N    ??PAGAMENTOS_subtrai_valores_3
    312               PAGAMENTOS_valor_acumulado_geral = 0;
   \   00000038   0x....             LDR.N    R0,??DataTable15_19
   \   0000003A   0x2100             MOVS     R1,#+0
   \   0000003C   0x6001             STR      R1,[R0, #+0]
    313             
    314             xSemaphoreGive(PAGAMENTOS_semaforo_pagamentos);      
   \                     ??PAGAMENTOS_subtrai_valores_3:
   \   0000003E   0x2300             MOVS     R3,#+0
   \   00000040   0x2200             MOVS     R2,#+0
   \   00000042   0x2100             MOVS     R1,#+0
   \   00000044   0x....             LDR.N    R0,??DataTable15_6
   \   00000046   0x6800             LDR      R0,[R0, #+0]
   \   00000048   0x.... 0x....      BL       xQueueGenericSend
    315          }
   \   0000004C   0xBD10             POP      {R4,PC}          ;; return
    316          /***********************************************************************************
    317          *       Descrição       :       Setter para o acumulador de dinheiro
    318          *       Parametros      :       (int valor)
    319          *       Retorno         :       nenhum
    320          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    321          void PAGAMENTOS_set_valores(int valor){
   \                     PAGAMENTOS_set_valores:
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    322            
    323             while(!xSemaphoreTake(PAGAMENTOS_semaforo_pagamentos,portTICK_RATE_MS*1));     
   \                     ??PAGAMENTOS_set_valores_0:
   \   00000004   0x2300             MOVS     R3,#+0
   \   00000006   0x2201             MOVS     R2,#+1
   \   00000008   0x2100             MOVS     R1,#+0
   \   0000000A   0x....             LDR.N    R0,??DataTable15_6
   \   0000000C   0x6800             LDR      R0,[R0, #+0]
   \   0000000E   0x.... 0x....      BL       xQueueGenericReceive
   \   00000012   0x2800             CMP      R0,#+0
   \   00000014   0xD0F6             BEQ.N    ??PAGAMENTOS_set_valores_0
    324             
    325             PAGAMENTOS_valor_acumulado_geral = valor;
   \   00000016   0x....             LDR.N    R0,??DataTable15_19
   \   00000018   0x6004             STR      R4,[R0, #+0]
    326             
    327             xSemaphoreGive(PAGAMENTOS_semaforo_pagamentos);   
   \   0000001A   0x2300             MOVS     R3,#+0
   \   0000001C   0x2200             MOVS     R2,#+0
   \   0000001E   0x2100             MOVS     R1,#+0
   \   00000020   0x....             LDR.N    R0,??DataTable15_6
   \   00000022   0x6800             LDR      R0,[R0, #+0]
   \   00000024   0x.... 0x....      BL       xQueueGenericSend
    328          }
   \   00000028   0xBD10             POP      {R4,PC}          ;; return
    329          /***********************************************************************************
    330          *       Descrição       :       Setter para o bloqueio dos meios de 
    331          *                               pagamento
    332          *       Parametros      :       (unsigned char) maior do que zero indica
    333          *                               que os meios de pagamento serão bloqueados
    334          *       Retorno         :       nenhum
    335          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    336          void PAGAMENTOS_set_bloqueio(unsigned char flag){
   \                     PAGAMENTOS_set_bloqueio:
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0x0004             MOVS     R4,R0
    337            
    338            PAGAMENTOS_bloqueio_p70 = flag;
   \   00000004   0x....             LDR.N    R0,??DataTable15_17
   \   00000006   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000008   0x6004             STR      R4,[R0, #+0]
    339            PAGAMENTOS_bloqueia_uca1(flag);
   \   0000000A   0x0020             MOVS     R0,R4
   \   0000000C   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000E   0x.... 0x....      BL       PAGAMENTOS_bloqueia_uca1
    340            PAGAMENTOS_set_inhibit_p70(flag);
   \   00000012   0x0020             MOVS     R0,R4
   \   00000014   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   00000016   0x.... 0x....      BL       PAGAMENTOS_set_inhibit_p70
    341            SMDBILL_set_bloqueio(flag);
                   ^
Warning[Pe223]: function "SMDBILL_set_bloqueio" declared implicitly
   \   0000001A   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   0000001C   0x0020             MOVS     R0,R4
   \   0000001E   0x.... 0x....      BL       SMDBILL_set_bloqueio
    342            SMDBCOIN_set_flag_bloqueio(flag);
                   ^
Warning[Pe223]: function "SMDBCOIN_set_flag_bloqueio" declared implicitly
   \   00000022   0xB2E4             UXTB     R4,R4            ;; ZeroExt  R4,R4,#+24,#+24
   \   00000024   0x0020             MOVS     R0,R4
   \   00000026   0x.... 0x....      BL       SMDBCOIN_set_flag_bloqueio
    343            BV20_setter_bloqueio(flag);
   \   0000002A   0x0020             MOVS     R0,R4
   \   0000002C   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000002E   0x.... 0x....      BL       BV20_setter_bloqueio
    344          }
   \   00000032   0xBD10             POP      {R4,PC}          ;; return
    345          /***********************************************************************************
    346          *       Descrição       :       Getter para o contador que indica que
    347          *                               não há interação com o meio de pagamento
    348          *       Parametros      :       nenhum
    349          *       Retorno         :       (unsigned int) contagem do contador
    350          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    351          unsigned int PAGAMENTOS_get_timeout_pagamento(void){
    352            
    353            return PAGAMENTOS_timeout_pagamento;
   \                     PAGAMENTOS_get_timeout_pagamento:
   \   00000000   0x....             LDR.N    R0,??DataTable15_20
   \   00000002   0x6800             LDR      R0,[R0, #+0]
   \   00000004   0x4770             BX       LR               ;; return
    354          }

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15:
   \   00000000   0x2009C020         DC32     0x2009c020

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_1:
   \   00000000   0x4002C010         DC32     0x4002c010

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_2:
   \   00000000   0x400FC148         DC32     0x400fc148

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_3:
   \   00000000   0x400FC14C         DC32     0x400fc14c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_4:
   \   00000000   0xE000E100         DC32     0xe000e100

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_5:
   \   00000000   0x2009C038         DC32     0x2009c038

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_6:
   \   00000000   0x........         DC32     PAGAMENTOS_semaforo_pagamentos

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_7:
   \   00000000   0x........         DC32     PAGAMENTOS_incremento_uca

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_8:
   \   00000000   0x........         DC32     PAGAMENTOS_incremento_p70

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_9:
   \   00000000   0x000186A1         DC32     0x186a1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_10:
   \   00000000   0x000186A0         DC32     0x186a0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_11:
   \   00000000   0x........         DC32     PAGAMENTOS_filtro_uca

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_12:
   \   00000000   0x........         DC32     PAGAMENTOS_filtro_p70

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_13:
   \   00000000   0x........         DC32     PAGAMENTOS_valor_acumulado_uca

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_14:
   \   00000000   0x400FC140         DC32     0x400fc140

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_15:
   \   00000000   0xE000E280         DC32     0xe000e280

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_16:
   \   00000000   0x2009C03C         DC32     0x2009c03c

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_17:
   \   00000000   0x........         DC32     PAGAMENTOS_bloqueio_p70

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_18:
   \   00000000   0x........         DC32     PAGAMENTOS_valor_acumulado_p70

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_19:
   \   00000000   0x........         DC32     PAGAMENTOS_valor_acumulado_geral

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable15_20:
   \   00000000   0x........         DC32     PAGAMENTOS_timeout_pagamento
    355          /***********************************************************************************
    356          *       Fim do arquivo
    357          ***********************************************************************************/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   PAGAMENTOS_adiciona_valores
         8   -> xQueueGenericReceive
         8   -> xQueueGenericSend
       0   PAGAMENTOS_bloqueia_uca1
       0   PAGAMENTOS_get_contagem_p70
       0   PAGAMENTOS_get_contagem_uca1
       0   PAGAMENTOS_get_timeout_pagamento
      24   PAGAMENTOS_get_valor_acumulado
        24   -> PARAMETROS_grava
        24   -> PARAMETROS_le
        24   -> xQueueGenericReceive
        24   -> xQueueGenericSend
       8   PAGAMENTOS_ini
         8   -> PARAMETROS_le
         8   -> xQueueCreate
         8   -> xQueueGenericSend
       0   PAGAMENTOS_irq_p70
       0   PAGAMENTOS_irq_uca_1
      16   PAGAMENTOS_main
        16   -> BV20_get_valor_acumulador
        16   -> BV20_subtrai_valor_acumulado
        16   -> PAGAMENTOS_adiciona_valores
        16   -> SMDB_ini
        16   -> SMDB_tick
        16   -> vTaskDelay
       8   PAGAMENTOS_set_bloqueio
         8   -> BV20_setter_bloqueio
         8   -> PAGAMENTOS_bloqueia_uca1
         8   -> PAGAMENTOS_set_inhibit_p70
         8   -> SMDBCOIN_set_flag_bloqueio
         8   -> SMDBILL_set_bloqueio
       0   PAGAMENTOS_set_inhibit_p70
       8   PAGAMENTOS_set_valores
         8   -> xQueueGenericReceive
         8   -> xQueueGenericSend
       0   PAGAMENTOS_subtrai_contagem_p70
       0   PAGAMENTOS_subtrai_contagem_uca1
       8   PAGAMENTOS_subtrai_valores
         8   -> xQueueGenericReceive
         8   -> xQueueGenericSend
       0   PAGAMENTOS_timer_tick


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable15
       4  ??DataTable15_1
       4  ??DataTable15_10
       4  ??DataTable15_11
       4  ??DataTable15_12
       4  ??DataTable15_13
       4  ??DataTable15_14
       4  ??DataTable15_15
       4  ??DataTable15_16
       4  ??DataTable15_17
       4  ??DataTable15_18
       4  ??DataTable15_19
       4  ??DataTable15_2
       4  ??DataTable15_20
       4  ??DataTable15_3
       4  ??DataTable15_4
       4  ??DataTable15_5
       4  ??DataTable15_6
       4  ??DataTable15_7
       4  ??DataTable15_8
       4  ??DataTable15_9
      58  PAGAMENTOS_adiciona_valores
      34  PAGAMENTOS_bloqueia_uca1
       4  PAGAMENTOS_bloqueio_p70
       2  PAGAMENTOS_filtro_p70
       2  PAGAMENTOS_filtro_uca
       6  PAGAMENTOS_get_contagem_p70
       6  PAGAMENTOS_get_contagem_uca1
       6  PAGAMENTOS_get_timeout_pagamento
     140  PAGAMENTOS_get_valor_acumulado
       4  PAGAMENTOS_incremento_p70
       4  PAGAMENTOS_incremento_uca
     298  PAGAMENTOS_ini
      62  PAGAMENTOS_irq_p70
      54  PAGAMENTOS_irq_uca_1
      58  PAGAMENTOS_main
       4  PAGAMENTOS_semaforo_pagamentos
      52  PAGAMENTOS_set_bloqueio
      34  PAGAMENTOS_set_inhibit_p70
      42  PAGAMENTOS_set_valores
      30  PAGAMENTOS_subtrai_contagem_p70
      30  PAGAMENTOS_subtrai_contagem_uca1
      78  PAGAMENTOS_subtrai_valores
       4  PAGAMENTOS_timeout_pagamento
      38  PAGAMENTOS_timer_tick
       4  PAGAMENTOS_valor_acumulado_geral
       2  PAGAMENTOS_valor_acumulado_p70
       2  PAGAMENTOS_valor_acumulado_uca
       4  _A_CLRPEND0
       4  _A_EXTINT
       4  _A_EXTMODE
       4  _A_EXTPOLAR
       4  _A_FIO1CLR
       4  _A_FIO1DIR
       4  _A_FIO1SET
       4  _A_PINSEL4
       4  _A_SETENA0

 
    28 bytes in section .bss
     4 bytes in section .data
    36 bytes in section .noinit (abs)
 1 110 bytes in section .text
 
 1 110 bytes of CODE memory
    32 bytes of DATA memory (+ 36 bytes shared)

Errors: none
Warnings: 3
