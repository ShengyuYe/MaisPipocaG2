###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V6.50.3.4676/W32 for ARM      20/Jul/2017  13:55:51 #
# Copyright 1999-2013 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Drivers\MDB\mdb_cashless.c                #
#    Command line =  C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Drivers\MDB\mdb_cashless.c -lC            #
#                    C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Debug\List\ -lA                           #
#                    C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Debug\List\ -o                            #
#                    C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Debug\Obj\ --no_cse --no_unroll           #
#                    --no_inline --no_code_motion --no_tbaa --no_clustering   #
#                    --no_scheduling --debug --endian=little --cpu=Cortex-M3  #
#                    -e --fpu=None --dlib_config "C:\Program Files (x86)\IAR  #
#                    Systems\Embedded Workbench 6.5\arm\INC\c\DLib_Config_Nor #
#                    mal.h" -Ol                                               #
#    List file    =  C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Debug\List\mdb_cashless.lst               #
#    Object file  =  C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPip #
#                    ocaG2\SOFTWARE\Debug\Obj\mdb_cashless.o                  #
#                                                                             #
#                                                                             #
###############################################################################

C:\Users\Marcos\Dropbox\Reps\Dextro\IBA\Hardware\MaisPipocaG2\SOFTWARE\Drivers\MDB\mdb_cashless.c
      1          /*__________________________________________________________________________________
      2          |	Quark Tecnologia Eletrônica Embarcada
      3          |       
      4          |       Itapema - SC
      5          |       www.quarktee.com.br
      6          | __________________________________________________________________________________
      7          |
      8          |       This source code was developed by Quark  and cannot be copied, in part 
      9          |       or in whole, or used, except when legally licensed by Quark 
     10          |       or its distributors.
     11          |
     12          |       Este código é propriedade da Quark  e não pode ser copiado, em parte 
     13          |       ou em todo, ou utilizado, exceto quando for legalmente licenciado pela 
     14          |       Quark  ou por um de seus distribuidores.
     15          | __________________________________________________________________________________
     16          |
     17          |       Arquivo            :  mdb_cashless.c
     18          | 
     19          |       Autor              :  Marcos Aquino
     20          |       Data criação       :  27/02/2017
     21          |
     22          |       Revisões           :  001
     23          |
     24          |
     25          | __________________________________________________________________________________
     26          */
     27          
     28          /***********************************************************************************
     29          *       Includes
     30          ***********************************************************************************/
     31          #include <stdio.h>
     32          #include <stdlib.h>
     33          #include <string.h>
     34          #include "mdb_uart.h"
     35          #include "mdb.h"
     36          #include "mdb_cashless.h"
     37          
     38          
     39          /***********************************************************************************
     40          *       Definições
     41          ***********************************************************************************/
     42          
     43          
     44          /***********************************************************************************
     45          *       Variaveis locais
     46          ***********************************************************************************/
     47          
     48          
     49          /***********************************************************************************
     50          *       Funções locais
     51          ***********************************************************************************/
     52          
     53          
     54          /***********************************************************************************
     55          *       Implementação das funções
     56          ***********************************************************************************/
     57          
     58          /***********************************************************************************
     59          *       Descrição       :       Verifica se o dispositivo está presente
     60          *                               no barramento
     61          *       Parametros      :       nenhum
     62          *       Retorno         :       (eMDB_reply) resultado
     63          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     64          eMDB_reply CASHLESS_adreess(void){
   \                     CASHLESS_adreess:
   \   00000000   0xB5E0             PUSH     {R5-R7,LR}
     65            unsigned char buffer[2];
     66            unsigned char recebidos;
     67            
     68            buffer[0] = MDB_CASHLESS_DEVICE;
   \   00000002   0x2010             MOVS     R0,#+16
   \   00000004   0xF88D 0x0008      STRB     R0,[SP, #+8]
     69            
     70            if(MDB_send_package(1,buffer,1,0,buffer,&recebidos)==MDB_OK){
   \   00000008   0xF10D 0x000A      ADD      R0,SP,#+10
   \   0000000C   0x9001             STR      R0,[SP, #+4]
   \   0000000E   0xA802             ADD      R0,SP,#+8
   \   00000010   0x9000             STR      R0,[SP, #+0]
   \   00000012   0x2300             MOVS     R3,#+0
   \   00000014   0x2201             MOVS     R2,#+1
   \   00000016   0xA902             ADD      R1,SP,#+8
   \   00000018   0x2001             MOVS     R0,#+1
   \   0000001A   0x.... 0x....      BL       MDB_send_package
   \   0000001E   0x2800             CMP      R0,#+0
   \   00000020   0xD107             BNE.N    ??CASHLESS_adreess_0
     71                  
     72              if(buffer[0]==MDB_RESP_ACK)
   \   00000022   0xF89D 0x0008      LDRB     R0,[SP, #+8]
   \   00000026   0x2800             CMP      R0,#+0
   \   00000028   0xD101             BNE.N    ??CASHLESS_adreess_1
     73                return MDB_OK;
   \   0000002A   0x2000             MOVS     R0,#+0
   \   0000002C   0xE002             B.N      ??CASHLESS_adreess_2
     74              
     75              return MDB_ERROR;
   \                     ??CASHLESS_adreess_1:
   \   0000002E   0x2001             MOVS     R0,#+1
   \   00000030   0xE000             B.N      ??CASHLESS_adreess_2
     76            }
     77              
     78            return  MDB_TIMEOUT; 
   \                     ??CASHLESS_adreess_0:
   \   00000032   0x2002             MOVS     R0,#+2
   \                     ??CASHLESS_adreess_2:
   \   00000034   0xBD0E             POP      {R1-R3,PC}       ;; return
     79          }
     80          /***********************************************************************************
     81          *       Descrição       :       Faz o reset da interface de cartão
     82          *       Parametros      :       nenhum
     83          *       Retorno         :       (eMDB_reply) resultado da operação
     84          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     85          eMDB_reply CASHLESS_reset_device(void){
   \                     CASHLESS_reset_device:
   \   00000000   0xB5E0             PUSH     {R5-R7,LR}
     86            unsigned char buffer[2];
     87            unsigned char recebidos;
     88            
     89            buffer[0] = CASHLESS_RESET;
   \   00000002   0x2010             MOVS     R0,#+16
   \   00000004   0xF88D 0x0008      STRB     R0,[SP, #+8]
     90            
     91            if(MDB_send_package(1,buffer,1,0,buffer,&recebidos)==MDB_OK){
   \   00000008   0xF10D 0x000A      ADD      R0,SP,#+10
   \   0000000C   0x9001             STR      R0,[SP, #+4]
   \   0000000E   0xA802             ADD      R0,SP,#+8
   \   00000010   0x9000             STR      R0,[SP, #+0]
   \   00000012   0x2300             MOVS     R3,#+0
   \   00000014   0x2201             MOVS     R2,#+1
   \   00000016   0xA902             ADD      R1,SP,#+8
   \   00000018   0x2001             MOVS     R0,#+1
   \   0000001A   0x.... 0x....      BL       MDB_send_package
   \   0000001E   0x2800             CMP      R0,#+0
   \   00000020   0xD107             BNE.N    ??CASHLESS_reset_device_0
     92                  
     93              if(buffer[0]==MDB_RESP_ACK)
   \   00000022   0xF89D 0x0008      LDRB     R0,[SP, #+8]
   \   00000026   0x2800             CMP      R0,#+0
   \   00000028   0xD101             BNE.N    ??CASHLESS_reset_device_1
     94                return MDB_OK;
   \   0000002A   0x2000             MOVS     R0,#+0
   \   0000002C   0xE002             B.N      ??CASHLESS_reset_device_2
     95              
     96              return MDB_ERROR;
   \                     ??CASHLESS_reset_device_1:
   \   0000002E   0x2001             MOVS     R0,#+1
   \   00000030   0xE000             B.N      ??CASHLESS_reset_device_2
     97            }
     98              
     99            return  MDB_TIMEOUT; 
   \                     ??CASHLESS_reset_device_0:
   \   00000032   0x2002             MOVS     R0,#+2
   \                     ??CASHLESS_reset_device_2:
   \   00000034   0xBD0E             POP      {R1-R3,PC}       ;; return
    100          }
    101          /***********************************************************************************
    102          *       Descrição       :     Lê e escreve nas configurações do cashless
    103          *       Parametros      :     (unsigned char) nível mdb
    104          *                             (unsigned char) quantidade de colunas do display
    105          *                             (unsigned char) quantidade de linhas do display
    106          *                             (eMDB_DISPLAY_INFO) informação sobre o display
    107          *                             (unsigned char*) nível configuraod
    108          *                             (unsigned short int*) pais
    109          *                             (unsigned char*) fator de escala
    110          *                             (unsigned char*) casas decimais
    111          *                             (unsigned char*) tempo máximo para transação
    112          *                             (unsigned char*) opções gerais
    113          *       Retorno         :     (eMDB_reply) resultado da operação
    114          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    115          eMDB_reply CASHLESS_set_and_get_setup_from_to_device(unsigned char nivel_mdb,
    116                                                               unsigned char linhas_lcd,
    117                                                               unsigned char colunas_lcd,
    118                                                               eMDB_DISPLAY_INFO info_lcd,                                                     
    119                                                               unsigned char *nivel_configurado,
    120                                                               unsigned short int*pais,
    121                                                               unsigned char *escala,
    122                                                               unsigned char *casas_decimais,
    123                                                               unsigned char *tempo_maximo_transacao,
    124                                                               unsigned char *opcoes_gerais){
   \                     CASHLESS_set_and_get_setup_from_to_device:
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB08D             SUB      SP,SP,#+52
    125            unsigned char buffer[36];
    126            unsigned char recebidos;
    127            
    128            buffer[0] = CASHLESS_SETUP;
   \   00000004   0x2011             MOVS     R0,#+17
   \   00000006   0xF88D 0x000C      STRB     R0,[SP, #+12]
    129            buffer[1] = 0x00;// Config DATA
   \   0000000A   0x2000             MOVS     R0,#+0
   \   0000000C   0xF88D 0x000D      STRB     R0,[SP, #+13]
    130            buffer[2] = 0x01;// Nivel da comunicação
   \   00000010   0x2001             MOVS     R0,#+1
   \   00000012   0xF88D 0x000E      STRB     R0,[SP, #+14]
    131            buffer[3] = 16;   // Colunas do LCD
   \   00000016   0x2010             MOVS     R0,#+16
   \   00000018   0xF88D 0x000F      STRB     R0,[SP, #+15]
    132            buffer[4] = 2;    // Linhas do LCD
   \   0000001C   0x2002             MOVS     R0,#+2
   \   0000001E   0xF88D 0x0010      STRB     R0,[SP, #+16]
    133            buffer[5] = 1;    // full ascii display
   \   00000022   0x2001             MOVS     R0,#+1
   \   00000024   0xF88D 0x0011      STRB     R0,[SP, #+17]
    134            
    135            if(MDB_send_package(1,buffer,6,1,buffer,&recebidos)==MDB_OK){
   \   00000028   0xA802             ADD      R0,SP,#+8
   \   0000002A   0x9001             STR      R0,[SP, #+4]
   \   0000002C   0xA803             ADD      R0,SP,#+12
   \   0000002E   0x9000             STR      R0,[SP, #+0]
   \   00000030   0x2301             MOVS     R3,#+1
   \   00000032   0x2206             MOVS     R2,#+6
   \   00000034   0xA903             ADD      R1,SP,#+12
   \   00000036   0x2001             MOVS     R0,#+1
   \   00000038   0x.... 0x....      BL       MDB_send_package
   \   0000003C   0x2800             CMP      R0,#+0
   \   0000003E   0xD133             BNE.N    ??CASHLESS_set_and_get_setup_from_to_device_0
    136                  
    137              if(buffer[0]==0x01 && recebidos>1){
   \   00000040   0xF89D 0x000C      LDRB     R0,[SP, #+12]
   \   00000044   0x2801             CMP      R0,#+1
   \   00000046   0xD12D             BNE.N    ??CASHLESS_set_and_get_setup_from_to_device_1
   \   00000048   0xF89D 0x0008      LDRB     R0,[SP, #+8]
   \   0000004C   0x2802             CMP      R0,#+2
   \   0000004E   0xDB29             BLT.N    ??CASHLESS_set_and_get_setup_from_to_device_1
   \   00000050   0x980E             LDR      R0,[SP, #+56]
    138                
    139                if(nivel_configurado!=NULL)
   \   00000052   0x2800             CMP      R0,#+0
   \   00000054   0xD002             BEQ.N    ??CASHLESS_set_and_get_setup_from_to_device_2
    140                  *nivel_configurado = buffer[Z2];
   \   00000056   0xF89D 0x100D      LDRB     R1,[SP, #+13]
   \   0000005A   0x7001             STRB     R1,[R0, #+0]
   \                     ??CASHLESS_set_and_get_setup_from_to_device_2:
   \   0000005C   0x980F             LDR      R0,[SP, #+60]
    141                
    142                if(pais!=NULL)
   \   0000005E   0x2800             CMP      R0,#+0
   \   00000060   0xD006             BEQ.N    ??CASHLESS_set_and_get_setup_from_to_device_3
    143                  *pais = buffer[Z3]<<8 | buffer[Z4];
   \   00000062   0xF89D 0x100E      LDRB     R1,[SP, #+14]
   \   00000066   0xF89D 0x200F      LDRB     R2,[SP, #+15]
   \   0000006A   0xEA52 0x2101      ORRS     R1,R2,R1, LSL #+8
   \   0000006E   0x8001             STRH     R1,[R0, #+0]
   \                     ??CASHLESS_set_and_get_setup_from_to_device_3:
   \   00000070   0x9810             LDR      R0,[SP, #+64]
    144                
    145                if(escala!=NULL)
   \   00000072   0x2800             CMP      R0,#+0
   \   00000074   0xD002             BEQ.N    ??CASHLESS_set_and_get_setup_from_to_device_4
    146                  *escala = buffer[Z5];
   \   00000076   0xF89D 0x1010      LDRB     R1,[SP, #+16]
   \   0000007A   0x7001             STRB     R1,[R0, #+0]
   \                     ??CASHLESS_set_and_get_setup_from_to_device_4:
   \   0000007C   0x9811             LDR      R0,[SP, #+68]
    147                
    148                if(casas_decimais!=NULL)
   \   0000007E   0x2800             CMP      R0,#+0
   \   00000080   0xD002             BEQ.N    ??CASHLESS_set_and_get_setup_from_to_device_5
    149                  *casas_decimais = buffer[Z6];
   \   00000082   0xF89D 0x1011      LDRB     R1,[SP, #+17]
   \   00000086   0x7001             STRB     R1,[R0, #+0]
   \                     ??CASHLESS_set_and_get_setup_from_to_device_5:
   \   00000088   0x9812             LDR      R0,[SP, #+72]
    150                
    151                if(tempo_maximo_transacao!=NULL)
   \   0000008A   0x2800             CMP      R0,#+0
   \   0000008C   0xD002             BEQ.N    ??CASHLESS_set_and_get_setup_from_to_device_6
    152                  *tempo_maximo_transacao = buffer[Z7];
   \   0000008E   0xF89D 0x1012      LDRB     R1,[SP, #+18]
   \   00000092   0x7001             STRB     R1,[R0, #+0]
   \                     ??CASHLESS_set_and_get_setup_from_to_device_6:
   \   00000094   0x9813             LDR      R0,[SP, #+76]
    153                
    154                if(opcoes_gerais!=NULL)
   \   00000096   0x2800             CMP      R0,#+0
   \   00000098   0xD002             BEQ.N    ??CASHLESS_set_and_get_setup_from_to_device_7
    155                  *opcoes_gerais = buffer[Z8];      
   \   0000009A   0xF89D 0x1013      LDRB     R1,[SP, #+19]
   \   0000009E   0x7001             STRB     R1,[R0, #+0]
    156                
    157                return MDB_OK;  
   \                     ??CASHLESS_set_and_get_setup_from_to_device_7:
   \   000000A0   0x2000             MOVS     R0,#+0
   \   000000A2   0xE002             B.N      ??CASHLESS_set_and_get_setup_from_to_device_8
    158              }
    159              
    160              return MDB_ERROR;
   \                     ??CASHLESS_set_and_get_setup_from_to_device_1:
   \   000000A4   0x2001             MOVS     R0,#+1
   \   000000A6   0xE000             B.N      ??CASHLESS_set_and_get_setup_from_to_device_8
    161            }
    162              
    163            return  MDB_TIMEOUT;                                                                                                  
   \                     ??CASHLESS_set_and_get_setup_from_to_device_0:
   \   000000A8   0x2002             MOVS     R0,#+2
   \                     ??CASHLESS_set_and_get_setup_from_to_device_8:
   \   000000AA   0xB00D             ADD      SP,SP,#+52
   \   000000AC   0xBD00             POP      {PC}             ;; return
    164          }
    165          /***********************************************************************************
    166          *       Descrição       :       Configura o preço mínimo e máximo do produto
    167          *       Parametros      :       (unsigned short int) mínimo
    168          *                               (unsigned short int) máximo
    169          *       Retorno         :       (eMDB_reply) resultado da operação
    170          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    171          eMDB_reply CASHLESS_set_min_and_max_price_in_device(unsigned short int min,
    172                                                              unsigned short int max){
   \                     CASHLESS_set_min_and_max_price_in_device:
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB08D             SUB      SP,SP,#+52
    173            unsigned char buffer[36];
    174            unsigned char recebidos;
    175            
    176            min*=100;
   \   00000004   0x2264             MOVS     R2,#+100
   \   00000006   0x4350             MULS     R0,R2,R0
    177            max*=100;
   \   00000008   0x2264             MOVS     R2,#+100
   \   0000000A   0x4351             MULS     R1,R2,R1
    178            
    179            buffer[0] = CASHLESS_SETUP;
   \   0000000C   0x2211             MOVS     R2,#+17
   \   0000000E   0xF88D 0x200C      STRB     R2,[SP, #+12]
    180            buffer[1] = 0x01;
   \   00000012   0x2201             MOVS     R2,#+1
   \   00000014   0xF88D 0x200D      STRB     R2,[SP, #+13]
    181            buffer[2] = max>>8;
   \   00000018   0xB289             UXTH     R1,R1            ;; ZeroExt  R1,R1,#+16,#+16
   \   0000001A   0x0A09             LSRS     R1,R1,#+8
   \   0000001C   0xF88D 0x100E      STRB     R1,[SP, #+14]
    182            buffer[3] = max>>16;
   \   00000020   0x2100             MOVS     R1,#+0
   \   00000022   0xF88D 0x100F      STRB     R1,[SP, #+15]
    183            buffer[4] = min>>8;
   \   00000026   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000028   0x0A01             LSRS     R1,R0,#+8
   \   0000002A   0xF88D 0x1010      STRB     R1,[SP, #+16]
    184            buffer[5] = min;
   \   0000002E   0xF88D 0x0011      STRB     R0,[SP, #+17]
    185            
    186            if(MDB_send_package(1,buffer,6,0,buffer,&recebidos)==MDB_OK){
   \   00000032   0xA802             ADD      R0,SP,#+8
   \   00000034   0x9001             STR      R0,[SP, #+4]
   \   00000036   0xA803             ADD      R0,SP,#+12
   \   00000038   0x9000             STR      R0,[SP, #+0]
   \   0000003A   0x2300             MOVS     R3,#+0
   \   0000003C   0x2206             MOVS     R2,#+6
   \   0000003E   0xA903             ADD      R1,SP,#+12
   \   00000040   0x2001             MOVS     R0,#+1
   \   00000042   0x.... 0x....      BL       MDB_send_package
   \   00000046   0x2800             CMP      R0,#+0
   \   00000048   0xD107             BNE.N    ??CASHLESS_set_min_and_max_price_in_device_0
    187                  
    188              if(buffer[0]==MDB_RESP_ACK)
   \   0000004A   0xF89D 0x000C      LDRB     R0,[SP, #+12]
   \   0000004E   0x2800             CMP      R0,#+0
   \   00000050   0xD101             BNE.N    ??CASHLESS_set_min_and_max_price_in_device_1
    189                return MDB_OK;
   \   00000052   0x2000             MOVS     R0,#+0
   \   00000054   0xE002             B.N      ??CASHLESS_set_min_and_max_price_in_device_2
    190              
    191              return MDB_ERROR;
   \                     ??CASHLESS_set_min_and_max_price_in_device_1:
   \   00000056   0x2001             MOVS     R0,#+1
   \   00000058   0xE000             B.N      ??CASHLESS_set_min_and_max_price_in_device_2
    192            }
    193              
    194            return  MDB_TIMEOUT;                                                    
   \                     ??CASHLESS_set_min_and_max_price_in_device_0:
   \   0000005A   0x2002             MOVS     R0,#+2
   \                     ??CASHLESS_set_min_and_max_price_in_device_2:
   \   0000005C   0xB00D             ADD      SP,SP,#+52
   \   0000005E   0xBD00             POP      {PC}             ;; return
    195          }
    196          /***********************************************************************************
    197          *       Descrição       :       Pool do dispositivo
    198          *       Parametros      :       nenhum
    199          *       Retorno         :       (eMDB_reply) resultado da operçaão
    200          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    201          eMDB_reply CASHLESS_poll_device(eMDB_POLL_HEADER *header,unsigned char *args){
   \                     CASHLESS_poll_device:
   \   00000000   0xB510             PUSH     {R4,LR}
   \   00000002   0xB084             SUB      SP,SP,#+16
   \   00000004   0x0004             MOVS     R4,R0
    202            unsigned char buffer[2];
    203            unsigned char recebidos;
    204            
    205            buffer[0] = CASHLESS_POLL;
   \   00000006   0x2012             MOVS     R0,#+18
   \   00000008   0xF88D 0x0008      STRB     R0,[SP, #+8]
    206            
    207            if(MDB_send_package(1,buffer,1,0,buffer,&recebidos)==MDB_OK){
   \   0000000C   0xF10D 0x000A      ADD      R0,SP,#+10
   \   00000010   0x9001             STR      R0,[SP, #+4]
   \   00000012   0xA802             ADD      R0,SP,#+8
   \   00000014   0x9000             STR      R0,[SP, #+0]
   \   00000016   0x2300             MOVS     R3,#+0
   \   00000018   0x2201             MOVS     R2,#+1
   \   0000001A   0xA902             ADD      R1,SP,#+8
   \   0000001C   0x2001             MOVS     R0,#+1
   \   0000001E   0x.... 0x....      BL       MDB_send_package
   \   00000022   0x2800             CMP      R0,#+0
   \   00000024   0xD15D             BNE.N    ??CASHLESS_poll_device_0
    208                      
    209              switch(buffer[0]){
   \   00000026   0xF89D 0x0008      LDRB     R0,[SP, #+8]
   \   0000002A   0x2800             CMP      R0,#+0
   \   0000002C   0xD022             BEQ.N    ??CASHLESS_poll_device_1
   \   0000002E   0x2801             CMP      R0,#+1
   \   00000030   0xD023             BEQ.N    ??CASHLESS_poll_device_2
   \   00000032   0x2802             CMP      R0,#+2
   \   00000034   0xD024             BEQ.N    ??CASHLESS_poll_device_3
   \   00000036   0x2803             CMP      R0,#+3
   \   00000038   0xD025             BEQ.N    ??CASHLESS_poll_device_4
   \   0000003A   0x2804             CMP      R0,#+4
   \   0000003C   0xD026             BEQ.N    ??CASHLESS_poll_device_5
   \   0000003E   0x2805             CMP      R0,#+5
   \   00000040   0xD027             BEQ.N    ??CASHLESS_poll_device_6
   \   00000042   0x2806             CMP      R0,#+6
   \   00000044   0xD028             BEQ.N    ??CASHLESS_poll_device_7
   \   00000046   0x2807             CMP      R0,#+7
   \   00000048   0xD029             BEQ.N    ??CASHLESS_poll_device_8
   \   0000004A   0x2808             CMP      R0,#+8
   \   0000004C   0xD02A             BEQ.N    ??CASHLESS_poll_device_9
   \   0000004E   0x2809             CMP      R0,#+9
   \   00000050   0xD02B             BEQ.N    ??CASHLESS_poll_device_10
   \   00000052   0x280A             CMP      R0,#+10
   \   00000054   0xD02C             BEQ.N    ??CASHLESS_poll_device_11
   \   00000056   0x280B             CMP      R0,#+11
   \   00000058   0xD02D             BEQ.N    ??CASHLESS_poll_device_12
   \   0000005A   0x280D             CMP      R0,#+13
   \   0000005C   0xD02E             BEQ.N    ??CASHLESS_poll_device_13
   \   0000005E   0x280E             CMP      R0,#+14
   \   00000060   0xD02F             BEQ.N    ??CASHLESS_poll_device_14
   \   00000062   0x280F             CMP      R0,#+15
   \   00000064   0xD030             BEQ.N    ??CASHLESS_poll_device_15
   \   00000066   0x2810             CMP      R0,#+16
   \   00000068   0xD031             BEQ.N    ??CASHLESS_poll_device_16
   \   0000006A   0x2811             CMP      R0,#+17
   \   0000006C   0xD032             BEQ.N    ??CASHLESS_poll_device_17
   \   0000006E   0x2812             CMP      R0,#+18
   \   00000070   0xD033             BEQ.N    ??CASHLESS_poll_device_18
   \   00000072   0xE034             B.N      ??CASHLESS_poll_device_19
    210                case CASHLESS_POOL_JUST_RESET:
    211                     *header = CASHLESS_POOL_JUST_RESET;
   \                     ??CASHLESS_poll_device_1:
   \   00000074   0x2000             MOVS     R0,#+0
   \   00000076   0x7020             STRB     R0,[R4, #+0]
    212                     break;
   \   00000078   0xE031             B.N      ??CASHLESS_poll_device_19
    213                case CASHLESS_POOL_READER_CONFIG_DATA:
    214                     *header = CASHLESS_POOL_READER_CONFIG_DATA;
   \                     ??CASHLESS_poll_device_2:
   \   0000007A   0x2001             MOVS     R0,#+1
   \   0000007C   0x7020             STRB     R0,[R4, #+0]
    215                     break;
   \   0000007E   0xE02E             B.N      ??CASHLESS_poll_device_19
    216                case CASHLESS_POOL_DISPLAY_REQUEST:
    217                     *header = CASHLESS_POOL_DISPLAY_REQUEST;
   \                     ??CASHLESS_poll_device_3:
   \   00000080   0x2002             MOVS     R0,#+2
   \   00000082   0x7020             STRB     R0,[R4, #+0]
    218                     break;
   \   00000084   0xE02B             B.N      ??CASHLESS_poll_device_19
    219                case CASHLESS_POOL_BEGIN_SESSION:
    220                     *header = CASHLESS_POOL_BEGIN_SESSION;
   \                     ??CASHLESS_poll_device_4:
   \   00000086   0x2003             MOVS     R0,#+3
   \   00000088   0x7020             STRB     R0,[R4, #+0]
    221                     break;
   \   0000008A   0xE028             B.N      ??CASHLESS_poll_device_19
    222                case CASHLESS_POOL_SESSION_CANCEL_REQUEST:
    223                     *header = CASHLESS_POOL_SESSION_CANCEL_REQUEST;
   \                     ??CASHLESS_poll_device_5:
   \   0000008C   0x2004             MOVS     R0,#+4
   \   0000008E   0x7020             STRB     R0,[R4, #+0]
    224                     break;
   \   00000090   0xE025             B.N      ??CASHLESS_poll_device_19
    225                case CASHLESS_POOL_VEND_APPROVED:
    226                     *header = CASHLESS_POOL_VEND_APPROVED;
   \                     ??CASHLESS_poll_device_6:
   \   00000092   0x2005             MOVS     R0,#+5
   \   00000094   0x7020             STRB     R0,[R4, #+0]
    227                     break;
   \   00000096   0xE022             B.N      ??CASHLESS_poll_device_19
    228                case CASHLESS_POOL_VEND_DENIED:
    229                     *header = CASHLESS_POOL_VEND_DENIED;
   \                     ??CASHLESS_poll_device_7:
   \   00000098   0x2006             MOVS     R0,#+6
   \   0000009A   0x7020             STRB     R0,[R4, #+0]
    230                     break;
   \   0000009C   0xE01F             B.N      ??CASHLESS_poll_device_19
    231                case CASHLESS_POOL_END_SESSION:
    232                     *header = CASHLESS_POOL_END_SESSION;
   \                     ??CASHLESS_poll_device_8:
   \   0000009E   0x2007             MOVS     R0,#+7
   \   000000A0   0x7020             STRB     R0,[R4, #+0]
    233                     break;
   \   000000A2   0xE01C             B.N      ??CASHLESS_poll_device_19
    234                case CASHLESS_POOL_CANCELLED:
    235                     *header = CASHLESS_POOL_CANCELLED;
   \                     ??CASHLESS_poll_device_9:
   \   000000A4   0x2008             MOVS     R0,#+8
   \   000000A6   0x7020             STRB     R0,[R4, #+0]
    236                     break;
   \   000000A8   0xE019             B.N      ??CASHLESS_poll_device_19
    237                case CASHLESS_POOL_PERIPHERAL_ID:
    238                     *header = CASHLESS_POOL_PERIPHERAL_ID;
   \                     ??CASHLESS_poll_device_10:
   \   000000AA   0x2009             MOVS     R0,#+9
   \   000000AC   0x7020             STRB     R0,[R4, #+0]
    239                     break;
   \   000000AE   0xE016             B.N      ??CASHLESS_poll_device_19
    240                case CASHLESS_POOL_MALFUNCTION:
    241                     *header = CASHLESS_POOL_MALFUNCTION;
   \                     ??CASHLESS_poll_device_11:
   \   000000B0   0x200A             MOVS     R0,#+10
   \   000000B2   0x7020             STRB     R0,[R4, #+0]
    242                     break;
   \   000000B4   0xE013             B.N      ??CASHLESS_poll_device_19
    243                case CASHLESS_POOL_CMD_OUT_OF_SEQUENCE:
    244                     *header = CASHLESS_POOL_CMD_OUT_OF_SEQUENCE;
   \                     ??CASHLESS_poll_device_12:
   \   000000B6   0x200B             MOVS     R0,#+11
   \   000000B8   0x7020             STRB     R0,[R4, #+0]
    245                     break;
   \   000000BA   0xE010             B.N      ??CASHLESS_poll_device_19
    246                case CASHLESS_POOL_REVALUE_APPROVED:
    247                     *header = CASHLESS_POOL_REVALUE_APPROVED;
   \                     ??CASHLESS_poll_device_13:
   \   000000BC   0x200D             MOVS     R0,#+13
   \   000000BE   0x7020             STRB     R0,[R4, #+0]
    248                     break;
   \   000000C0   0xE00D             B.N      ??CASHLESS_poll_device_19
    249                case CASHLESS_POOL_REVALUE_DENIED:
    250                     *header = CASHLESS_POOL_REVALUE_DENIED;        
   \                     ??CASHLESS_poll_device_14:
   \   000000C2   0x200E             MOVS     R0,#+14
   \   000000C4   0x7020             STRB     R0,[R4, #+0]
    251                     break;
   \   000000C6   0xE00A             B.N      ??CASHLESS_poll_device_19
    252                case CASHLESS_POOL_REVALUE_LIMIT_AMOUNT:
    253                     *header = CASHLESS_POOL_REVALUE_LIMIT_AMOUNT;       
   \                     ??CASHLESS_poll_device_15:
   \   000000C8   0x200F             MOVS     R0,#+15
   \   000000CA   0x7020             STRB     R0,[R4, #+0]
    254                     break;
   \   000000CC   0xE007             B.N      ??CASHLESS_poll_device_19
    255                case CASHLESS_POOL_USER_FILE:
    256                     *header = CASHLESS_POOL_USER_FILE;  
   \                     ??CASHLESS_poll_device_16:
   \   000000CE   0x2010             MOVS     R0,#+16
   \   000000D0   0x7020             STRB     R0,[R4, #+0]
    257                     break;
   \   000000D2   0xE004             B.N      ??CASHLESS_poll_device_19
    258                case CASHLESS_POOL_TIME_DATE_REQUEST:
    259                     *header = CASHLESS_POOL_TIME_DATE_REQUEST;          
   \                     ??CASHLESS_poll_device_17:
   \   000000D4   0x2011             MOVS     R0,#+17
   \   000000D6   0x7020             STRB     R0,[R4, #+0]
    260                     break;
   \   000000D8   0xE001             B.N      ??CASHLESS_poll_device_19
    261                case CASHLESS_DATA_ENTRY:
    262                     *header = CASHLESS_DATA_ENTRY;          
   \                     ??CASHLESS_poll_device_18:
   \   000000DA   0x2012             MOVS     R0,#+18
   \   000000DC   0x7020             STRB     R0,[R4, #+0]
    263                     break;
    264              }
    265                  
    266              
    267              return MDB_OK;
   \                     ??CASHLESS_poll_device_19:
   \   000000DE   0x2000             MOVS     R0,#+0
   \   000000E0   0xE000             B.N      ??CASHLESS_poll_device_20
    268            }
    269              
    270            return  MDB_TIMEOUT;  
   \                     ??CASHLESS_poll_device_0:
   \   000000E2   0x2002             MOVS     R0,#+2
   \                     ??CASHLESS_poll_device_20:
   \   000000E4   0xB004             ADD      SP,SP,#+16
   \   000000E6   0xBD10             POP      {R4,PC}          ;; return
    271          }
    272          /***********************************************************************************
    273          *       Descrição       :       Envia o comando solicitando um inicio de 
    274          *                               transação
    275          *       Parametros      :       (unsigned short int) valor
    276          *                               (unsigned short int) código do produto
    277          *       Retorno         :       (eMDB_reply) maior do que zero se 
    278          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    279          eMDB_reply MDBCASHLESS_start_vend(eCASHLESS_VEND_RESULT *resultado,
    280                                            unsigned short int *pago,
    281                                            unsigned short int valor,unsigned short int code){
   \                     MDBCASHLESS_start_vend:
   \   00000000   0xB530             PUSH     {R4,R5,LR}
   \   00000002   0xB085             SUB      SP,SP,#+20
   \   00000004   0x0004             MOVS     R4,R0
   \   00000006   0x000D             MOVS     R5,R1
    282            unsigned char buffer[6];
    283            unsigned char recebidos;    
    284            
    285            
    286            buffer[0] = CASHLESS_VEND;
   \   00000008   0x2013             MOVS     R0,#+19
   \   0000000A   0xF88D 0x000C      STRB     R0,[SP, #+12]
    287            buffer[1] = REQUEST_VEND;
   \   0000000E   0x2000             MOVS     R0,#+0
   \   00000010   0xF88D 0x000D      STRB     R0,[SP, #+13]
    288            buffer[2] = (unsigned char)(valor>>8);
   \   00000014   0xB292             UXTH     R2,R2            ;; ZeroExt  R2,R2,#+16,#+16
   \   00000016   0x0A10             LSRS     R0,R2,#+8
   \   00000018   0xF88D 0x000E      STRB     R0,[SP, #+14]
    289            buffer[3] = valor;
   \   0000001C   0xF88D 0x200F      STRB     R2,[SP, #+15]
    290            buffer[4] = (unsigned char)(code>>8);
   \   00000020   0xB29B             UXTH     R3,R3            ;; ZeroExt  R3,R3,#+16,#+16
   \   00000022   0x0A18             LSRS     R0,R3,#+8
   \   00000024   0xF88D 0x0010      STRB     R0,[SP, #+16]
    291            buffer[5] = code;
   \   00000028   0xF88D 0x3011      STRB     R3,[SP, #+17]
    292            
    293            *resultado = VEND_DENIED;
   \   0000002C   0x2006             MOVS     R0,#+6
   \   0000002E   0x7020             STRB     R0,[R4, #+0]
    294            
    295            if(MDB_send_package(1,buffer,6,0,buffer,&recebidos)==MDB_OK){
   \   00000030   0xA802             ADD      R0,SP,#+8
   \   00000032   0x9001             STR      R0,[SP, #+4]
   \   00000034   0xA803             ADD      R0,SP,#+12
   \   00000036   0x9000             STR      R0,[SP, #+0]
   \   00000038   0x2300             MOVS     R3,#+0
   \   0000003A   0x2206             MOVS     R2,#+6
   \   0000003C   0xA903             ADD      R1,SP,#+12
   \   0000003E   0x2001             MOVS     R0,#+1
   \   00000040   0x.... 0x....      BL       MDB_send_package
   \   00000044   0x2800             CMP      R0,#+0
   \   00000046   0xD10B             BNE.N    ??MDBCASHLESS_start_vend_0
    296              
    297              *resultado = (eCASHLESS_VEND_RESULT)buffer[Z1];    
   \   00000048   0xF89D 0x000C      LDRB     R0,[SP, #+12]
   \   0000004C   0x7020             STRB     R0,[R4, #+0]
    298              *pago = buffer[Z2]<<8 | buffer[Z3];
   \   0000004E   0xF89D 0x000D      LDRB     R0,[SP, #+13]
   \   00000052   0xF89D 0x100E      LDRB     R1,[SP, #+14]
   \   00000056   0xEA51 0x2000      ORRS     R0,R1,R0, LSL #+8
   \   0000005A   0x8028             STRH     R0,[R5, #+0]
    299              
    300              return MDB_OK;
   \   0000005C   0x2000             MOVS     R0,#+0
   \   0000005E   0xE000             B.N      ??MDBCASHLESS_start_vend_1
    301            }
    302            
    303            return MDB_TIMEOUT;
   \                     ??MDBCASHLESS_start_vend_0:
   \   00000060   0x2002             MOVS     R0,#+2
   \                     ??MDBCASHLESS_start_vend_1:
   \   00000062   0xB005             ADD      SP,SP,#+20
   \   00000064   0xBD30             POP      {R4,R5,PC}       ;; return
    304          }
    305          /***********************************************************************************
    306          *       Descrição       :       Envia o comando para cancelamento da venda
    307          *       Parametros      :       nenhum
    308          *       Retorno         :       (eMDB_reply) se receber resposta
    309          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    310          eMDB_reply MDBCASHLESS_vend_cancel(void){
   \                     MDBCASHLESS_vend_cancel:
   \   00000000   0xB5E0             PUSH     {R5-R7,LR}
    311            unsigned char buffer[2]  ;
    312            unsigned char recebidos;
    313            
    314            buffer[Z1] = CASHLESS_VEND;
   \   00000002   0x2013             MOVS     R0,#+19
   \   00000004   0xF88D 0x0008      STRB     R0,[SP, #+8]
    315            buffer[Z2] = CANCEL_VEND;
   \   00000008   0x2001             MOVS     R0,#+1
   \   0000000A   0xF88D 0x0009      STRB     R0,[SP, #+9]
    316            
    317            if(MDB_send_package(1,buffer,2,0,buffer,&recebidos)==MDB_OK){
   \   0000000E   0xF10D 0x000A      ADD      R0,SP,#+10
   \   00000012   0x9001             STR      R0,[SP, #+4]
   \   00000014   0xA802             ADD      R0,SP,#+8
   \   00000016   0x9000             STR      R0,[SP, #+0]
   \   00000018   0x2300             MOVS     R3,#+0
   \   0000001A   0x2202             MOVS     R2,#+2
   \   0000001C   0xA902             ADD      R1,SP,#+8
   \   0000001E   0x2001             MOVS     R0,#+1
   \   00000020   0x.... 0x....      BL       MDB_send_package
   \   00000024   0x2800             CMP      R0,#+0
   \   00000026   0xD105             BNE.N    ??MDBCASHLESS_vend_cancel_0
    318             
    319              if(buffer[Z1] == VEND_DENIED)
   \   00000028   0xF89D 0x0008      LDRB     R0,[SP, #+8]
   \   0000002C   0x2806             CMP      R0,#+6
   \   0000002E   0xD101             BNE.N    ??MDBCASHLESS_vend_cancel_0
    320                return MDB_OK;
   \   00000030   0x2000             MOVS     R0,#+0
   \   00000032   0xE000             B.N      ??MDBCASHLESS_vend_cancel_1
    321            }
    322            
    323            return MDB_TIMEOUT;
   \                     ??MDBCASHLESS_vend_cancel_0:
   \   00000034   0x2002             MOVS     R0,#+2
   \                     ??MDBCASHLESS_vend_cancel_1:
   \   00000036   0xBD0E             POP      {R1-R3,PC}       ;; return
    324          }
    325          /***********************************************************************************
    326          *       Descrição       :       Sucesso na venda
    327          *       Parametros      :       (unsigned short int) item
    328          *       Retorno         :       (eMDB_reply) se receber resposta
    329          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    330          eMDB_reply MDBCASHLESS_vend_success(unsigned short int item){
   \                     MDBCASHLESS_vend_success:
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB085             SUB      SP,SP,#+20
    331            unsigned char buffer[4];
    332            unsigned char recebidos;
    333            
    334            buffer[Z1] = CASHLESS_VEND;
   \   00000004   0x2113             MOVS     R1,#+19
   \   00000006   0xF88D 0x100C      STRB     R1,[SP, #+12]
    335            buffer[Z2] = SUCCESS_VEND;
   \   0000000A   0x2102             MOVS     R1,#+2
   \   0000000C   0xF88D 0x100D      STRB     R1,[SP, #+13]
    336            buffer[Z3] = item>>8;
   \   00000010   0xB280             UXTH     R0,R0            ;; ZeroExt  R0,R0,#+16,#+16
   \   00000012   0x0A01             LSRS     R1,R0,#+8
   \   00000014   0xF88D 0x100E      STRB     R1,[SP, #+14]
    337            buffer[Z4] = item;
   \   00000018   0xF88D 0x000F      STRB     R0,[SP, #+15]
    338            
    339            if(MDB_send_package(1,buffer,4,0,buffer,&recebidos)==MDB_OK){
   \   0000001C   0xA802             ADD      R0,SP,#+8
   \   0000001E   0x9001             STR      R0,[SP, #+4]
   \   00000020   0xA803             ADD      R0,SP,#+12
   \   00000022   0x9000             STR      R0,[SP, #+0]
   \   00000024   0x2300             MOVS     R3,#+0
   \   00000026   0x2204             MOVS     R2,#+4
   \   00000028   0xA903             ADD      R1,SP,#+12
   \   0000002A   0x2001             MOVS     R0,#+1
   \   0000002C   0x.... 0x....      BL       MDB_send_package
   \   00000030   0x2800             CMP      R0,#+0
   \   00000032   0xD101             BNE.N    ??MDBCASHLESS_vend_success_0
    340             
    341              
    342              return MDB_OK;
   \   00000034   0x2000             MOVS     R0,#+0
   \   00000036   0xE000             B.N      ??MDBCASHLESS_vend_success_1
    343            }
    344                
    345            return MDB_TIMEOUT;
   \                     ??MDBCASHLESS_vend_success_0:
   \   00000038   0x2002             MOVS     R0,#+2
   \                     ??MDBCASHLESS_vend_success_1:
   \   0000003A   0xB005             ADD      SP,SP,#+20
   \   0000003C   0xBD00             POP      {PC}             ;; return
    346          }
    347          /***********************************************************************************
    348          *       Descrição       :       Habilita a leitora
    349          *       Parametros      :       nenhum
    350          *       Retorno         :       (eMDB_reply) se receber a configurmação
    351          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    352          eMDB_reply MDBCASHLESS_enable_reader(unsigned char flag){
   \                     MDBCASHLESS_enable_reader:
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB085             SUB      SP,SP,#+20
    353            unsigned char buffer[3];
    354            unsigned char recebidos;
    355            
    356            buffer[Z1] = CASHLESS_READER;
   \   00000004   0x2114             MOVS     R1,#+20
   \   00000006   0xF88D 0x100C      STRB     R1,[SP, #+12]
    357            buffer[Z2] = flag?1:0;
   \   0000000A   0xB2C0             UXTB     R0,R0            ;; ZeroExt  R0,R0,#+24,#+24
   \   0000000C   0x2800             CMP      R0,#+0
   \   0000000E   0xD001             BEQ.N    ??MDBCASHLESS_enable_reader_0
   \   00000010   0x2001             MOVS     R0,#+1
   \   00000012   0xE000             B.N      ??MDBCASHLESS_enable_reader_1
   \                     ??MDBCASHLESS_enable_reader_0:
   \   00000014   0x2000             MOVS     R0,#+0
   \                     ??MDBCASHLESS_enable_reader_1:
   \   00000016   0xF88D 0x000D      STRB     R0,[SP, #+13]
    358            
    359            if(MDB_send_package(1,buffer,2,0,buffer,&recebidos)==MDB_OK){
   \   0000001A   0xA802             ADD      R0,SP,#+8
   \   0000001C   0x9001             STR      R0,[SP, #+4]
   \   0000001E   0xA803             ADD      R0,SP,#+12
   \   00000020   0x9000             STR      R0,[SP, #+0]
   \   00000022   0x2300             MOVS     R3,#+0
   \   00000024   0x2202             MOVS     R2,#+2
   \   00000026   0xA903             ADD      R1,SP,#+12
   \   00000028   0x2001             MOVS     R0,#+1
   \   0000002A   0x.... 0x....      BL       MDB_send_package
   \   0000002E   0x2800             CMP      R0,#+0
   \   00000030   0xD101             BNE.N    ??MDBCASHLESS_enable_reader_2
    360                
    361              return MDB_OK;
   \   00000032   0x2000             MOVS     R0,#+0
   \   00000034   0xE000             B.N      ??MDBCASHLESS_enable_reader_3
    362            }
    363                
    364            return MDB_TIMEOUT;
   \                     ??MDBCASHLESS_enable_reader_2:
   \   00000036   0x2002             MOVS     R0,#+2
   \                     ??MDBCASHLESS_enable_reader_3:
   \   00000038   0xB005             ADD      SP,SP,#+20
   \   0000003A   0xBD00             POP      {PC}             ;; return
    365          }
    366          /***********************************************************************************
    367          *       Descrição       :       Sessão completa
    368          *       Parametros      :       envia o comando se fim da compra
    369          *       Retorno         :       (eMDB_reply) se receber confirmação
    370          ***********************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    371          eMDB_reply MDBCASHLESS_session_complete(void){
   \                     MDBCASHLESS_session_complete:
   \   00000000   0xB500             PUSH     {LR}
   \   00000002   0xB085             SUB      SP,SP,#+20
    372            unsigned char buffer[3];
    373            unsigned char recebidos;
    374            
    375            buffer[Z1] = CASHLESS_VEND;
   \   00000004   0x2013             MOVS     R0,#+19
   \   00000006   0xF88D 0x000C      STRB     R0,[SP, #+12]
    376            buffer[Z2] = SESSION_COMPLETE;
   \   0000000A   0x2004             MOVS     R0,#+4
   \   0000000C   0xF88D 0x000D      STRB     R0,[SP, #+13]
    377            
    378            if(MDB_send_package(1,buffer,2,0,buffer,&recebidos)==MDB_OK){
   \   00000010   0xA802             ADD      R0,SP,#+8
   \   00000012   0x9001             STR      R0,[SP, #+4]
   \   00000014   0xA803             ADD      R0,SP,#+12
   \   00000016   0x9000             STR      R0,[SP, #+0]
   \   00000018   0x2300             MOVS     R3,#+0
   \   0000001A   0x2202             MOVS     R2,#+2
   \   0000001C   0xA903             ADD      R1,SP,#+12
   \   0000001E   0x2001             MOVS     R0,#+1
   \   00000020   0x.... 0x....      BL       MDB_send_package
   \   00000024   0x2800             CMP      R0,#+0
   \   00000026   0xD101             BNE.N    ??MDBCASHLESS_session_complete_0
    379                
    380              return MDB_OK;
   \   00000028   0x2000             MOVS     R0,#+0
   \   0000002A   0xE000             B.N      ??MDBCASHLESS_session_complete_1
    381            }
    382                
    383            return MDB_TIMEOUT;
   \                     ??MDBCASHLESS_session_complete_0:
   \   0000002C   0x2002             MOVS     R0,#+2
   \                     ??MDBCASHLESS_session_complete_1:
   \   0000002E   0xB005             ADD      SP,SP,#+20
   \   00000030   0xBD00             POP      {PC}             ;; return
    384          }
    385          /***********************************************************************************
    386          *       Fim do arquivo
    387          ***********************************************************************************/

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      16   CASHLESS_adreess
        16   -> MDB_send_package
      24   CASHLESS_poll_device
        24   -> MDB_send_package
      16   CASHLESS_reset_device
        16   -> MDB_send_package
      56   CASHLESS_set_and_get_setup_from_to_device
        56   -> MDB_send_package
      56   CASHLESS_set_min_and_max_price_in_device
        56   -> MDB_send_package
      24   MDBCASHLESS_enable_reader
        24   -> MDB_send_package
      24   MDBCASHLESS_session_complete
        24   -> MDB_send_package
      32   MDBCASHLESS_start_vend
        32   -> MDB_send_package
      16   MDBCASHLESS_vend_cancel
        16   -> MDB_send_package
      24   MDBCASHLESS_vend_success
        24   -> MDB_send_package


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      54  CASHLESS_adreess
     232  CASHLESS_poll_device
      54  CASHLESS_reset_device
     174  CASHLESS_set_and_get_setup_from_to_device
      96  CASHLESS_set_min_and_max_price_in_device
      60  MDBCASHLESS_enable_reader
      50  MDBCASHLESS_session_complete
     102  MDBCASHLESS_start_vend
      56  MDBCASHLESS_vend_cancel
      62  MDBCASHLESS_vend_success

 
 940 bytes in section .text
 
 940 bytes of CODE memory

Errors: none
Warnings: none
